(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{"+d1s":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".payout-chip[data-v-153ddb56] {\n  width: 60px;\n}\n@keyframes shotani-data-v-153ddb56 {\n0% {\n    filter: grayscale(0) brightness(1);\n}\n25% {\n    filter: grayscale(1) brightness(1.5);\n}\n50% {\n    filter: grayscale(0) brightness(1);\n}\n75% {\n    filter: grayscale(1) brightness(1.5);\n}\n100% {\n    filter: grayscale(0) brightness(1);\n}\n}\n@keyframes pauseani-data-v-153ddb56 {\n0% {\n    filter: grayscale(0) brightness(1);\n}\n100% {\n    filter: grayscale(1) brightness(1.5);\n}\n}\n.animation-container[data-v-153ddb56] {\n  position: relative;\n  width: 100%;\n  height: calc(100vh - 112px);\n}\n.animation-container .progress[data-v-153ddb56] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.animation-container .runners[data-v-153ddb56] {\n  top: 20px;\n  left: 20px;\n  background: rgba(0, 0, 0, 0.3);\n  position: absolute;\n}\n.animation-container .animation[data-v-153ddb56] {\n  width: 100%;\n  height: 100%;\n}\n.animation-container .animation.shot[data-v-153ddb56] {\n  animation: shotani-data-v-153ddb56 0.3s infinite ease-in-out;\n}\n.animation-container .animation.paused[data-v-153ddb56] {\n  filter: grayscale(1) brightness(1.5);\n  animation: pauseani-data-v-153ddb56 0.1s;\n}\n.animation-container .results[data-v-153ddb56] {\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.flip-list-move[data-v-153ddb56] {\n  transition: transform 0.1s;\n}",""])},"/+Uy":function(t,e){t.exports="/images/fence.png?b7f090aab0d3970f8578af98901bb149"},"2ZF7":function(t,e){t.exports="/images/num_10.png?85630010a9020051337498c13e6377ff"},"33/t":function(t,e){t.exports="/images/num_2.png?34d3aa41d5f64dbdd7fd173556fe36ea"},"3YGu":function(t,e,a){t.exports=a.p+"audio/horse-racing/gallop.wav"},"4pFl":function(t,e){t.exports="/images/num_7.png?1f1f280e139e3085ea4638c06686e6a5"},"7Q2Z":function(t,e,a){t.exports=a.p+"audio/horse-racing/flash.wav"},"7Sp9":function(t,e,a){var s=a("BvjH");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(t.exports=s.locals)},"8xKW":function(t,e){t.exports="/images/sand.jpg?99a135be2b88793799e9a1538113664e"},BvjH:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".loader[data-v-0ccd884f] {\n  width: 150px;\n}",""])},FEZ8:function(t,e){t.exports="/images/saddle.png?057f72588cfbbf2b925a8d0ad820e24f"},FjpJ:function(t,e,a){"use strict";a("Se8i");var s=a("KHd+"),i=a("ZUTo"),n=a.n(i),r=a("jjY0"),o=Object(s.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loader"},[e("p",{staticClass:"text-center text--primary"},[this._v("\n    "+this._s(this.$t("Loading"))+"\n  ")]),this._v(" "),e("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"5",width:"100"}})],1)}),[],!1,null,"0ccd884f",null);e.a=o.exports;n()(o,{VProgressLinear:r.a})},GjGY:function(t,e){t.exports="/images/any.png?29b954e3072a5efc669bb670a57aa8b2"},HuP7:function(t,e){t.exports="/images/horse.png?8f76a6d10cfd41486ccd7cdcabb1d466"},IlSS:function(t,e){t.exports="/images/forest.png?80e6abf33a0e3bac967bb75279f8888c"},JgCT:function(t,e){t.exports="/images/num_3.png?6938b87c7956f428ae8f7d7750b93d0e"},MAOD:function(t,e){t.exports="/images/body.png?989bb6ccf74056b4de418a530fbebdd1"},MMYG:function(t,e){t.exports="/images/head.png?5ba820a613d3360b7dd9c3f6972ebcf9"},OY7U:function(t,e,a){"use strict";var s=a("fpkf"),i=a("g6NE");var n={computed:{gamePackageId:function(){return this.$route.params.game},gameSlug:function(){return this.$route.params.slug},config:function(){var t=this;return this.gameSlug?Object(s.a)("".concat(this.gamePackageId)).variations.find((function(e){return e.slug===t.gameSlug})):Object(s.a)("".concat(this.gamePackageId))},provablyFairGame:function(){return this.$store.getters["provably-fair/get"](this.gamePackageId)||{}}},methods:{getRoute:function(t){return e="games.".concat(this.gamePackageId,".").concat(t),i.a.getters["route/get"](e);var e}}},r=a("KHd+"),o=Object(r.a)(n,void 0,void 0,!1,null,null,null);e.a=o.exports},PSXI:function(t,e,a){"use strict";a.d(e,"a",(function(){return at}));var s=a("o0o1"),i=a.n(s),n=a("ra4X"),r=a("hwmY"),o=a.n(r),c=a("lnXG"),h=a.n(c),m=a("UT9m"),g=a.n(m),u=a("33/t"),f=a.n(u),d=a("JgCT"),p=a.n(d),l=a("b9N5"),b=a.n(l),v=a("iNeT"),_=a.n(v),w=a("zQQ4"),x=a.n(w),y=a("4pFl"),k=a.n(y),j=a("fIJ/"),O=a.n(j),B=a("ucXG"),I=a.n(B),C=a("2ZF7"),W=a.n(C),P=a("R/t/"),$=a.n(P),F=a("YMJJ"),H=a.n(F),A=a("pSW0"),T=a.n(A),S=a("GjGY"),E=a.n(S),M=a("MAOD"),V=a.n(M),G=a("TH1k"),D=a.n(G),R=a("MMYG"),Y=a.n(R),z=a("HuP7"),U=a.n(z),q=a("FEZ8"),J=a.n(q),Z=a("VKZG"),L=a.n(Z);function K(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}function Q(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function X(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var N=[g.a,f.a,p.a,b.a,_.a,x.a,k.a,O.a,I.a,W.a,$.a,H.a];function tt(t){return"#"!==t[0]&&(t=o()(t)),t}function et(t,e){for(var a,s=document.createElement("canvas"),i=s.getContext("2d",{alpha:!0}),n={R:(a=parseInt(e.replace(/^#/,""),16))>>>16&255,G:a>>>8&255,B:255&a},r=function(t){var e=document.createElement("canvas"),a=e.getContext("2d",{alpha:!0});return e.width=t.width,e.height=t.height,a.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,t.width,t.height),a.getImageData(0,0,t.width,t.height)}(t),o=0,c=r.data.length;o<c;o+=4)r.data[o+3]>0&&(r.data[o+0]=n.R*(r.data[o+0]/255)+(n.R<100&&r.data[o+0]>180?(r.data[o+0]-180)/75*50:0),r.data[o+0]>255&&(r.data[o+0]=255),r.data[o+1]=n.G*(r.data[o+1]/255)+(n.G<100&&r.data[o+1]>180?(r.data[o+1]-180)/75*50:0),r.data[o+1]>255&&(r.data[o+1]=255),r.data[o+2]=n.B*(r.data[o+2]/255)+(n.B<100&&r.data[o+2]>180?(r.data[o+2]-180)/75*50:0),r.data[o+2]>255&&(r.data[o+2]=255));return s.width=t.width,s.height=t.height,i.putImageData(r,0,0),s}var at=function(){function t(e,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,"name",""),X(this,"colors",{}),X(this,"frames",[]),X(this,"num",1),X(this,"framesCnt",12),X(this,"frmW",0),X(this,"frmH",0),X(this,"frame",0),X(this,"paused",!0),X(this,"position",0),X(this,"target",0),X(this,"dir",0),X(this,"preview",""),X(this,"finished",!1),this.colors=h()(e),this.num=s,this.name=a,this.t_last=0,this.t_frame=25,this.position_start=0}var e,a,s,r,o;return e=t,(a=[{key:"init",value:(r=i.a.mark((function t(){var e,a,s,r,o,c,h,m,u,f,d,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.a)(T.a);case 2:return e=t.sent,t.t0=et,t.next=6,Object(n.a)(U.a);case 6:return t.t1=t.sent,t.t2=this.colors.horse.body?tt(this.colors.horse.body):"#000000",a=(0,t.t0)(t.t1,t.t2),t.t3=et,t.next=12,Object(n.a)(L.a);case 12:return t.t4=t.sent,t.t5=this.colors.horse.tail?tt(this.colors.horse.tail):"#333333",s=(0,t.t3)(t.t4,t.t5),t.t6=et,t.next=18,Object(n.a)(J.a);case 18:return t.t7=t.sent,t.t8=this.colors.horse.pad&&this.colors.horse.pad.background?tt(this.colors.horse.pad.background):"#aaaaaa",r=(0,t.t6)(t.t7,t.t8),t.t9=et,t.next=24,Object(n.a)(this.num>0&&this.num<13?N[this.num-1]:g.a);case 24:return t.t10=t.sent,t.t11=this.colors.horse.pad&&this.colors.horse.pad.text?tt(this.colors.horse.pad.text):"#333333",o=(0,t.t9)(t.t10,t.t11),t.t12=et,t.next=30,Object(n.a)(V.a);case 30:return t.t13=t.sent,t.t14=this.colors.jockey.shirt?tt(this.colors.jockey.shirt):"#ffffff",c=(0,t.t12)(t.t13,t.t14),t.t15=et,t.next=36,Object(n.a)(D.a);case 36:return t.t16=t.sent,t.t17=this.colors.jockey.face?tt(this.colors.jockey.face):["#FFDCB1","#E5C298","#E4B98E","#710200","#E1ADA4"][Math.round(4*Math.random())],h=(0,t.t15)(t.t16,t.t17),t.t18=et,t.next=42,Object(n.a)(Y.a);case 42:return t.t19=t.sent,t.t20=this.colors.jockey.hat?tt(this.colors.jockey.hat):"#ffffff",m=(0,t.t18)(t.t19,t.t20),t.next=47,Object(n.a)(E.a);case 47:for(u=t.sent,this.frmW=e.width/this.framesCnt,this.frmH=e.height,this.frames=[];this.frames.length<this.framesCnt;)(f=document.createElement("canvas")).height=this.frmH,f.width=this.frmW,this.frames.push(f);for(d in this.frames)(p=this.frames[d].getContext("2d",{alpha:!0})).drawImage(e,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(a,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(s,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(r,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(o,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(c,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(h,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(m,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH),p.drawImage(u,this.frmW*d,0,this.frmW,this.frmH,0,0,this.frmW,this.frmH);this.paused=!1,this.t_last=(new Date).getTime(),this.frame=0,this.preview=this.frames[1].toDataURL("image/png");case 57:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(a,s){var i=r.apply(t,e);function n(t){K(i,a,s,n,o,"next",t)}function o(t){K(i,a,s,n,o,"throw",t)}n(void 0)}))},function(){return o.apply(this,arguments)})},{key:"getFrame",value:function(t){if(void 0!==t)return t<0?this.frames[0]:t>=this.framesCnt?this.frames[this.framesCnt-1]:this.frames[t];if(this.paused)return this.frames[this.frame];var e=(new Date).getTime();if(e>this.t_last+this.t_frame){var a=Math.floor((e-this.t_last)/this.t_frame);for(this.t_last=e,this.frame+=a;this.frame>=this.framesCnt;)this.frame-=this.framesCnt}return this.frames[this.frame]}},{key:"pause",value:function(){this.paused=!0}},{key:"continue",value:function(){this.paused&&(this.paused=!1,this.t_last=(new Date).getTime())}}])&&Q(e.prototype,a),s&&Q(e,s),t}()},"R/t/":function(t,e){t.exports="/images/num_11.png?c60c1efcc054784ec3e22878172440b2"},RI7Q:function(t,e,a){"use strict";var s=a("lYrr");a.n(s).a},Rf2p:function(t,e){t.exports="/images/background.png?ecb8c89fab08bc7e16b322fd46567067"},Se8i:function(t,e,a){"use strict";var s=a("7Sp9");a.n(s).a},TH1k:function(t,e){t.exports="/images/face.png?b1866e47866f4228836518f7d3e45c19"},UT9m:function(t,e){t.exports="/images/num_1.png?73cfe707c1ea0b1df804f13d640c1279"},VA6O:function(t,e,a){t.exports=a.p+"audio/common/click.wav"},VKZG:function(t,e){t.exports="/images/tail.png?00d18530d1803e7ba520da2ba83c973e"},Y9kG:function(t,e){t.exports="/images/fence_post.png?0c969006408194e07e173cf524e68c13"},YMJJ:function(t,e){t.exports="/images/num_12.png?83e0e34074db9c9ecabaea12caa91c7a"},ZreC:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),i=a.n(s),n=a("ra4X"),r=a("PSXI"),o=a("vDqi"),c=a.n(o),h=a("L2JU"),m=a("fpkf"),g=a("C3Ci"),u=a("OY7U"),f=a("fYW3"),d=a("VA6O"),p=a.n(d),l=a("xQA9"),b=a.n(l),v=a("dfp4"),_=a.n(v),w=a("7Q2Z"),x=a.n(w),y=a("3YGu"),k=a.n(y),j=a("FjpJ"),O=a("Rf2p"),B=a.n(O),I=a("IlSS"),C=a.n(I),W=a("i6lL"),P=a.n(W),$=a("xUF3"),F=a.n($),H=a("8xKW"),A=a.n(H),T=a("/+Uy"),S=a.n(T),E=a("Y9kG"),M=a.n(E);function V(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}function G(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var n=t.apply(e,a);function r(t){V(n,s,i,r,o,"next",t)}function o(t){V(n,s,i,r,o,"throw",t)}r(void 0)}))}}function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function R(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),!0).forEach((function(e){Y(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var z={name:"HorseRacing",components:{BlockPreloader:j.a},mixins:[g.a,u.a,f.a],data:function(){return{loading:!1,playing:!1,ready:!1,message:null,inputBets:[],positions:[],progress:0,runners_sorted:[],game:{p:0,runners:[],positions:[],shot:0,static:{bg:null,bg_pos:0,bg_speed:1,forest:null,forest_pos:0,forest_speed:2,meadow:null,meadow_pos:0,meadow_speed:3,grass:null,grass_pos:0,grass_speed:6,sand:null,sand_pos:0,sand_speed:8,fence:null,fence_pos:0,fence_speed:8,fence_post:null,fence_post_pos:0},buf:null,buf_ctx:null,ctx:null,width:0,height:0,t_frame:5,t_last:0,t_repos:0,paused:!1,complete:0},betTypes:[this.$t("Win"),this.$t("Place"),this.$t("Show")]}},computed:R(R({},Object(h.d)("auth",["account"])),{},{config:function(){return Object(m.a)("horse-racing")||{}},defaultBet:function(){return parseInt(this.config.default_bet_amount,10)},minBet:function(){return parseInt(this.config.min_bet,10)},maxBet:function(){return parseInt(this.config.max_bet,10)},betStep:function(){return parseInt(this.config.bet_change_amount,10)},paytable:function(){return this.config.paytable},isPlayDisabled:function(){return!this.provablyFairGame.hash||!this.formIsValid||!this.bets.length||this.playing||this.totalBetAmount>this.account.balance},bets:function(){var t=[];return this.inputBets.forEach((function(e,a){e.forEach((function(e,s){e>0&&t.push({type:a,positions:[s],bet:e})}))})),t},totalBetAmount:function(){return this.bets.reduce((function(t,e){return t+e.bet}),0)}}),beforeDestroy:function(){this.gameStop()},created:function(){var t=this;window.addEventListener("resize",this.resize),this.$nextTick((function(){t.init()}))},destroyed:function(){window.removeEventListener("resize",this.resize)},methods:R(R({},Object(h.b)({updateUserAccountBalance:"auth/updateUserAccountBalance",setProvablyFairGame:"provably-fair/set"})),{},{init:function(){var t=this;return G(i.a.mark((function e(){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.betTypes.forEach((function(e){t.inputBets.push(Array(t.config.runners.length).fill(0))})),t.game.runners=[],e.t0=i.a.keys(t.config.runners);case 3:if((e.t1=e.t0()).done){e.next=11;break}return a=e.t1.value,s=new r.a(t.config.runners[a].colors,t.config.runners[a].name,parseInt(a)+1),e.next=8,s.init();case 8:t.game.runners.push(s),e.next=3;break;case 11:return e.next=13,Object(n.a)(B.a);case 13:return t.game.static.bg=e.sent,t.game.static.bg_pos=0,e.next=17,Object(n.a)(C.a);case 17:return t.game.static.forest=e.sent,t.game.static.forest_pos=0,e.next=21,Object(n.a)(P.a);case 21:return t.game.static.meadow=e.sent,t.game.static.meadow_pos=0,e.next=25,Object(n.a)(F.a);case 25:return t.game.static.grass=e.sent,t.game.static.grass_pos=0,e.next=29,Object(n.a)(A.a);case 29:return t.game.static.sand=e.sent,t.game.static.sand_pos=0,e.next=33,Object(n.a)(S.a);case 33:return t.game.static.fence=e.sent,t.game.static.fence_pos=0,e.next=37,Object(n.a)(M.a);case 37:t.game.static.fence_post=e.sent,t.game.buf=document.createElement("canvas"),t.game.buf_ctx=t.game.buf.getContext("2d"),t.requestAnimationFrameGet(),t.ready=!0;case 42:case"end":return e.stop()}}),e)})))()},requestAnimationFrameGet:function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;this.requestAnimationFrame=t?t.bind(window):null},drawBg:function(t){var e,a,s,i;for(e=.5*this.game.height/this.game.static.bg.height,a=this.game.static.bg_pos*e,s=this.game.static.bg.width*e,i=this.game.static.bg.height*e;a<this.game.width;)this.game.buf_ctx.drawImage(this.game.static.bg,a,0,s,i),a+=s;for(this.game.static.bg_pos-=t*this.game.static.bg_speed,this.game.static.bg_pos<-this.game.static.bg.width&&(this.game.static.bg_pos+=this.game.static.bg.width),e=.5*this.game.height/this.game.static.forest.height,a=this.game.static.forest_pos*e,s=this.game.static.forest.width*e,i=this.game.static.forest.height*e;a<this.game.width;)this.game.buf_ctx.drawImage(this.game.static.forest,a,0,s,i),a+=s;for(this.game.static.forest_pos-=t*this.game.static.forest_speed,this.game.static.forest_pos<-this.game.static.forest.width&&(this.game.static.forest_pos+=this.game.static.forest.width),e=.5*this.game.height/this.game.static.meadow.height,a=this.game.static.meadow_pos*e,s=this.game.static.meadow.width*e,i=this.game.static.meadow.height*e;a<this.game.width;)this.game.buf_ctx.drawImage(this.game.static.meadow,a,0,s,i),a+=s;this.game.static.meadow_pos-=t*this.game.static.meadow_speed,this.game.static.meadow_pos<-this.game.static.meadow.width&&(this.game.static.meadow_pos+=this.game.static.meadow.width)},drawTrack:function(t){var e,a,s,i,n,r,o;for(o=.49*this.game.height,e=.5*this.game.height/this.game.static.bg.height,a=this.game.static.grass_pos*e,s=this.game.static.grass.width*e,i=this.game.static.grass.height*e;a<this.game.width;)this.game.buf_ctx.drawImage(this.game.static.grass,a,o,s,i),this.game.buf_ctx.drawImage(this.game.static.grass,a,o+i,s,i),a+=s;for(this.game.static.grass_pos-=t*this.game.static.grass_speed,this.game.static.grass_pos<-this.game.static.grass.width&&(this.game.static.grass_pos+=this.game.static.grass.width),a=this.game.static.sand_pos*e,s=this.game.static.sand.width*e,r=this.game.static.sand.height*e;a<this.game.width;){for(var c=o+2*i;c<this.game.height;c+=r)this.game.buf_ctx.drawImage(this.game.static.sand,a,c,s,r);a+=s}for(this.game.static.sand_pos-=t*this.game.static.sand_speed,this.game.static.sand_pos<-this.game.static.sand.width&&(this.game.static.sand_pos+=this.game.static.sand.width),a=this.game.static.fence_pos*e,s=this.game.static.fence.width*e,n=this.game.static.fence.height*e;a<this.game.width;)this.game.step_finish&&(a<this.game.static.fence_post_pos*e&&this.game.static.fence_post_pos*e<a+this.game.static.fence.width*e||a<this.game.static.fence_post_pos*e+this.game.static.fence_post.width*e&&this.game.static.fence_post_pos*e+this.game.static.fence_post.width*e<a+this.game.static.fence.width*e)||this.game.buf_ctx.drawImage(this.game.static.fence,a,o+2*i-n+18*e,s,n),a+=s;this.game.static.fence_pos-=t*this.game.static.fence_speed,this.game.static.fence_pos<-this.game.static.fence.width&&(this.game.static.fence_pos+=this.game.static.fence.width),this.game.step_finish&&(this.game.buf_ctx.drawImage(this.game.static.fence_post,this.game.static.fence_post_pos*e,o+2*i-this.game.static.fence_post.height*e+25*e,this.game.static.fence_post.width*e,this.game.static.fence_post.height*e),this.game.static.fence_post_pos-=t*this.game.static.fence_speed)},animation:function(){var t=this;if(this.playing){var e=(new Date).getTime(),a=Math.floor((e-this.game.t_last)/this.game.t_frame);if(!(this.$vuetify.breakpoint.width>this.$vuetify.breakpoint.height))return this.game.t_start+=e-this.game.t_last,this.game.t_last=e,void this.requestAnimationFrame(this.animation);if(this.game.shot&&this.game.shot+300<e)return this.soundLoop(k.a),this.game.shot=0,this.requestAnimationFrame(this.animation),this.game.t_last=e,this.game.runners.forEach((function(t){return t.continue()})),void(4===this.game.step_finish&&this.game.endFunc());if(this.game.shot)this.requestAnimationFrame(this.animation);else{this.game.t_last+=this.game.t_frame*a,this.drawBg(a),this.drawTrack(a);var s=.5*this.game.height/this.game.static.bg.height,i=4*s,n=.5*this.game.height+300*s,r=(this.game.height-20-n)/(this.game.runners.length-1),o=!1;for(var c in this.game.runners){if(this.game.buf_ctx.drawImage(this.game.runners[c].getFrame(),(this.game.width-100*s-this.game.runners[c].frmW*i)*(.01*this.game.runners[c].position),n-this.game.runners[c].frmH*i+40*i,this.game.runners[c].frmW*i,this.game.runners[c].frmH*i),n+=r,a>0&&!this.game.step_finish){var h=this.config.animation.overtake_multiplier*(1-this.game.runners[c].p/100-Math.random())*.5;this.game.runners[c].dir+=h,this.game.runners[c].p+=this.game.runners[c].dir*a,this.game.runners[c].position=this.game.runners[c].p*(50-Math.abs(this.game.complete-50))*2/100+this.game.runners[c].target*(this.game.complete>this.game.runners[c].nature?(this.game.complete-this.game.runners[c].nature)/(100-this.game.runners[c].nature):0)}else this.game.step_finish&&this.game.step_finish<4&&!this.game.runners[c].finished&&(this.game.width-100*s-this.game.runners[c].frmW*i)*(.01*this.game.runners[c].position)+this.game.runners[c].frmW*i-40*i>this.game.static.fence_post_pos*s+this.game.static.fence_post.width*s*.5&&(this.game.runners[c].finished=!0,this.game.runners.forEach((function(t){return t.pause()})),this.game.shot=e,this.game.step_finish++,this.sound(x.a),this.soundStop(k.a));if(e-this.game.t_repos>250){var m=this.game.runners.reduce((function(e,a){return e+(a.position>t.game.runners[c].position?1:0)}),0);this.game.positions[c].pos!==m&&(this.game.positions[c].pos=m,o=!0)}}o&&(this.game.t_repos=e),a>0&&(this.game.complete=(e-this.game.t_start)/this.game.length*100,this.game.complete>100&&(this.game.complete=100,0===this.game.step_finish&&(this.game.step_finish=1,this.game.static.fence_post_pos=this.game.width/s+this.game.static.fence_post.width/s)),Math.round(this.game.complete)!==this.progress&&(this.progress=Math.round(this.game.complete))),this.runners_sorted.reduce((function(t,e){return t+e.num}),"")!==Object.values(this.game.positions).sort((function(t,e){return t.pos===e.pos?t.num>e.num?-1:1:t.pos>e.pos?1:-1})).reduce((function(t,e){return t+e.num}),"")&&(this.runners_sorted=Object.values(this.game.positions).sort((function(t,e){return t.pos===e.pos?t.num>e.num?-1:1:t.pos>e.pos?1:-1}))),this.game.ctx.drawImage(this.game.buf,0,0),this.game.step_finish&&this.game.static.fence_post_pos+this.game.static.fence_post.width*s<0?(this.game.paused=!0,this.soundStop(k.a)):this.requestAnimationFrame(this.animation)}}},gameStop:function(){this.soundStop(k.a),this.playing=!1},gameAnimation:function(){var t=this;return new Promise((function(e,a){t.playing=!0,t.$nextTick((function(){var a;for(t.resize(),t.game.ctx=t.$refs.animation.getContext("2d"),t.game.length=1e3*t.config.animation.length,t.game.positions=[],a=0;a<t.game.runners.length;a++)t.game.positions.push({name:t.game.runners[a].name,num:t.game.runners[a].num,pos:a,colors:t.game.runners[a].colors}),t.game.runners[a].finished=!1,t.game.runners[a].position=0,t.game.runners[a].p=50,t.game.runners[a].nature=50*Math.random()+25,t.game.runners[a].dir=0;var s=100-40*Math.random();for(a=0;a<t.game.runners.length;a++){var i=t.positions[a];if(0===a)t.game.runners[i].target=s;else{var n=s,r=(t.game.runners.length-1-a)*(2+3*Math.random());r+=(n-r-1)*Math.random(),s-=Math.random()*(n-r),t.game.runners[i].target=s}s--}t.runners_sorted=Object.values(t.game.positions).sort((function(t,e){return t.pos===e.pos?t.num>e.num?-1:1:t.pos>e.pos?1:-1})),t.game.step_finish=0,t.game.complete=0,t.progress=0,t.game.t_start=(new Date).getTime(),t.game.paused=!1,t.game.t_last=(new Date).getTime(),t.game.endFunc=e,t.soundLoop(k.a),t.requestAnimationFrame(t.animation)}))}))},resize:function(){this.$refs.animation&&(this.game.width=this.$refs.animation.clientWidth,this.game.height=this.$refs.animation.clientHeight,this.$refs.animation.width=this.game.width,this.$refs.animation.height=this.game.height,this.game.buf.width=this.game.width,this.game.buf.height=this.game.height)},reset:function(){var t=this;this.betTypes.forEach((function(e,a){t.inputBets[a].forEach((function(e,s){t.minimizeBet(a,s)}))}))},minimizeBet:function(t,e){this.inputBets[t].splice(e,1,this.minBet)},maximizeBet:function(t,e){this.inputBets[t].splice(e,1,this.maxBet)},decrementBet:function(t,e){var a=this.inputBets[t][e]-this.betStep;this.inputBets[t].splice(e,1,Math.max(this.minBet,a))},incrementBet:function(t,e){var a=this.inputBets[t][e]+this.betStep;this.inputBets[t].splice(e,1,Math.min(this.maxBet,a))},play:function(){var t=this;return G(i.a.mark((function e(){var a,s,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sound(p.a),t.loading=!0,t.message=null,t.positions=[],t.updateUserAccountBalance(t.account.balance-t.totalBetAmount),a=t.getRoute("play"),s={hash:t.provablyFairGame.hash,bets:t.bets},e.next=9,c.a.post(a,s);case 9:return n=e.sent,r=n.data,t.loading=!1,t.setProvablyFairGame({key:t.gamePackageId,game:r.pf_game}),t.positions=r.gameable.positions.map((function(t){return parseInt(t)})),e.next=16,t.gameAnimation();case 16:t.updateUserAccountBalance(r.account.balance),r.win>0?(t.sound(b.a),t.message=t.$t("You won")+" "+r.win):(t.sound(_.a),t.message=t.$t("You lost"));case 18:case"end":return e.stop()}}),e)})))()}})},U=(a("RI7Q"),a("KHd+")),q=a("ZUTo"),J=a.n(q),Z=a("B5h7"),L=a("gzZi"),K=a("sK+t"),Q=a("mdmw"),X=a("zCDB"),N=a("Yq0q"),tt=a("pSOK"),et=a("S9TP"),at=a("Ey0z"),st=a("rdoz"),it=a("jjY0"),nt=a("D9m0"),rt=a("hlRy"),ot=a("cdmR"),ct=a("Kn9U"),ht=a("Oi+f"),mt=Object(U.a)(z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"d-flex justify-center align-center":!t.ready,"fill-height":!(t.ready&&t.$vuetify.breakpoint.width>t.$vuetify.breakpoint.height)}},[t.ready?a("div",{staticClass:"d-flex justify-center align-center",class:{"fill-height":!(t.$vuetify.breakpoint.width>t.$vuetify.breakpoint.height)}},[t.playing&&t.$vuetify.breakpoint.width>t.$vuetify.breakpoint.height?a("div",{staticClass:"animation-container"},[a("canvas",{ref:"animation",staticClass:"animation",class:{shot:0!==t.game.shot,paused:t.game.paused}}),t._v(" "),a("v-card",{staticClass:"runners px-4 py-2",attrs:{flat:""}},[a("transition-group",{staticClass:"pl-0",attrs:{name:"flip-list",tag:"ul"}},t._l(t.runners_sorted,(function(e){return a("div",{key:e.num,staticClass:"body-1 py-1"},[a("v-chip",{staticClass:"mr-4",attrs:{color:e.colors.horse.pad.background,"text-color":e.colors.horse.pad.text,label:"","x-small":""}},[t._v("\n              "+t._s(e.num)+"\n            ")]),t._v("\n            "+t._s(e.name)+"\n          ")],1)})),0)],1),t._v(" "),a("v-progress-linear",{staticClass:"progress",model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}}),t._v(" "),a("transition",{attrs:{name:"scale"}},[4===t.game.step_finish&&0===t.game.shot?a("v-card",{staticClass:"results px-16 pt-4 pb-4"},[a("div",{staticClass:"align-center"},[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"text-center",attrs:{dense:"",outlined:"",text:"",color:"primary"}},[t._v("\n              "+t._s(t.message)+"\n            ")]),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.loading||t.totalBetAmount>t.account.balance},on:{click:t.play}},[t._v("\n              "+t._s(t.$t("Play again"))+"\n            ")]),t._v(" "),a("v-btn",{attrs:{color:"primary",outlined:"",disabled:t.loading},on:{click:t.gameStop}},[t._v("\n              "+t._s(t.$t("Change bet"))+"\n            ")])],1)]):t._e()],1)],1):t.$vuetify.breakpoint.width>t.$vuetify.breakpoint.height?a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-card",[a("v-toolbar",[a("v-toolbar-title",[t._v("\n                "+t._s(t.$t("Place your bet"))+"\n              ")])],1),t._v(" "),a("v-card-text",[a("v-form",{model:{value:t.formIsValid,callback:function(e){t.formIsValid=e},expression:"formIsValid"}},[a("v-row",t._l(t.game.runners,(function(e,s){return a("v-col",{key:s,attrs:{sm:"12",md:"6"}},[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("h3",{staticClass:"heading text-center mb-3"},[a("v-chip",{staticClass:"ma-2",attrs:{color:e.colors.horse.pad.background,"text-color":e.colors.horse.pad.text,label:"",small:""}},[t._v("\n                            "+t._s(e.num)+"\n                          ")]),t._v("\n                          "+t._s(e.name)+"\n                        ")],1),t._v(" "),a("v-card",{staticClass:"d-flex align-center justify-center",attrs:{height:"100",flat:""}},[a("v-img",{attrs:{src:e.preview,contain:"",height:"180"}})],1)],1),t._v(" "),a("v-col",[t._l(t.betTypes,(function(e,i){return[a("v-text-field",{key:i,staticClass:"text-center mb-2",attrs:{dense:"",outlined:"",label:e,disabled:t.loading,rules:[t.validationInteger,function(e){return t.validationMin(e,t.minBet)},function(e){return t.validationMax(e,Math.min(Math.floor(t.account.balance),t.maxBet))}],"hide-details":!0,"prepend-inner-icon":"mdi-minus","append-icon":"mdi-plus"},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[a("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(e){return t.minimizeBet(i,s)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n                                  mdi-arrow-down\n                                ")])],1),t._v(" "),a("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(e){return t.decrementBet(i,s)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n                                  mdi-minus\n                                ")])],1)]},proxy:!0},{key:"append",fn:function(){return[a("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(e){return t.incrementBet(i,s)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n                                  mdi-plus\n                                ")])],1),t._v(" "),a("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(e){return t.maximizeBet(i,s)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n                                  mdi-arrow-up\n                                ")])],1)]},proxy:!0},{key:"append-outer",fn:function(){return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-chip",t._g({staticClass:"payout-chip justify-center mt-n1",attrs:{color:"primary",label:""}},n),[t._v("\n                                    x "+t._s(t.paytable[i][s])+"\n                                  ")])]}}],null,!0)},[t._v(" "),a("span",[t._v(t._s(t.$t("Payout"))+" "+t._s(t.$t("bet x {0}",[t.paytable[i][s]])))])])]},proxy:!0}],null,!0),model:{value:t.inputBets[i][s],callback:function(e){t.$set(t.inputBets[i],s,t._n(e))},expression:"inputBets[type][index]"}})]}))],2)],1)],1)})),1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"justify-center pb-5"},[a("v-btn",{attrs:{outlined:"",color:"primary",disabled:t.loading||!t.bets.length},on:{click:t.reset}},[t._v("\n                "+t._s(t.$t("Reset"))+"\n              ")]),t._v(" "),a("v-btn",{staticClass:"ml-2",attrs:{color:"primary",loading:t.loading,disabled:t.isPlayDisabled},on:{click:t.play}},[t._v("\n                "+t._s(t.$t("Play"))+"\n              ")])],1)],1)],1)],1)],1):a("div",{staticClass:"d-flex fill-height align-center justify-center"},[a("v-alert",{staticClass:"text-center",attrs:{dense:"",outlined:"",text:"",color:"primary"}},[t._v("\n        "+t._s(t.$t("Please use landscape (horizontal) orientation."))+"\n      ")])],1)],1):a("block-preloader")],1)}),[],!1,null,"153ddb56",null);e.default=mt.exports;J()(mt,{VAlert:Z.a,VBtn:L.a,VCard:K.a,VCardActions:Q.a,VCardText:Q.c,VChip:X.a,VCol:N.a,VContainer:tt.a,VForm:et.a,VIcon:at.a,VImg:st.a,VProgressLinear:it.a,VRow:nt.a,VTextField:rt.a,VToolbar:ot.a,VToolbarTitle:ct.a,VTooltip:ht.a})},b9N5:function(t,e){t.exports="/images/num_4.png?05c35cc93bec7e62d1456e1585d5f304"},dfp4:function(t,e,a){t.exports=a.p+"audio/horse-racing/lose.wav"},"fIJ/":function(t,e){t.exports="/images/num_8.png?37d8b2a1303f148432a7e5eae813a019"},i6lL:function(t,e){t.exports="/images/meadow.png?623b2e10f659bf405c42575f73d0448e"},iNeT:function(t,e){t.exports="/images/num_5.png?d5783b585ec380c5c837e27be74f3724"},lYrr:function(t,e,a){var s=a("+d1s");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(t.exports=s.locals)},pSW0:function(t,e){t.exports="/images/shadow.png?c98c8b72c9b072690cffd980a7e3a289"},ucXG:function(t,e){t.exports="/images/num_9.png?5936eee6cbba87fd43d1c66f89df3887"},xQA9:function(t,e,a){t.exports=a.p+"audio/horse-racing/win.wav"},xUF3:function(t,e){t.exports="/images/grass.jpg?d12092542b7ee669f30240585bb27435"},zQQ4:function(t,e){t.exports="/images/num_6.png?022091dcb11031895d05d6e3a1d767a3"}}]);
//# sourceMappingURL=horse-racing-resources-js-pages-game.js.map