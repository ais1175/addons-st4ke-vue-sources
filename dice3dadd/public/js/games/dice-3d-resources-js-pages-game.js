(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{"513U":function(e,t,i){"use strict";(function(e){i.d(t,"d",(function(){return p})),i.d(t,"e",(function(){return v})),i.d(t,"f",(function(){return b})),i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return y})),i.d(t,"c",(function(){return w})),i.d(t,"g",(function(){return x}));var a=i("9ZTT"),n=i("Womt");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}var m=function(){function e(){u(this,e),this.world=null}return d(e,[{key:"setWorld",value:function(e){this.world=e,this.diceBodyMaterial=new a.Material,this.floorBodyMaterial=new a.Material,this.barrierBodyMaterial=new a.Material,e.addContactMaterial(new a.ContactMaterial(this.floorBodyMaterial,this.diceBodyMaterial,{friction:.01,restitution:.5})),e.addContactMaterial(new a.ContactMaterial(this.barrierBodyMaterial,this.diceBodyMaterial,{friction:0,restitution:1})),e.addContactMaterial(new a.ContactMaterial(this.diceBodyMaterial,this.diceBodyMaterial,{friction:0,restitution:.5}))}},{key:"prepareValues",value:function(e,t){var i=this;if(this.throwRunning)throw new Error("Cannot start another throw. Please wait, till the current throw is finished.");for(var a=0;a<e.length;a++)if(e[a].value<1||e[a].dice.values<e[a].value)throw new Error("Cannot throw die to value "+e[a].value+", because it has only "+e[a].dice.values+" sides.");this.throwRunning=!0;for(var n=0;n<e.length;n++)e[n].dice.simulationRunning=!0,e[n].stableCount=0,e[n].steps=[],e[n].sound=[],e[n].lastSound=0,e[n].steps.push(e[n].dice.getVisibleVectors());var o=!1,r=function(){o=!0};t.addEventListener("collide",r);this.world.addEventListener("postStep",(function a(){for(var n=!0,s=0;s<e.length;s++)e[s].dice.isFinished()?e[s].stableCount++:e[s].stableCount=0,e[s].stableCount<50&&(n=!1),e[s].steps.push(e[s].dice.getVisibleVectors()),e[s].sound.push(o);if(o=!1,i.simulateStep++,n){x.world.removeEventListener("postStep",a),t.removeEventListener("collide",r);for(var l=0;l<e.length;l++)e[l].dice.shiftUpperValue(e[l].value),e[l].dice.simulationRunning=!1;i.throwRunning=!1}else x.world.step(1/60)})),x.world.step(1/60)}}]),e}(),f=function(){function e(t){u(this,e),t=this.setDefaults(t,{size:100,fontColor:"#000000",backColor:"#ffffff"}),this.object=null,this.size=t.size,this.invertUpside=!1,this.materialOptions={specular:1515554,color:15790320,shininess:40,flatShading:!0},this.labelColor=t.fontColor,this.diceColor=t.backColor}return d(e,[{key:"setDefaults",value:function(e,t){for(var i in e=e||{},t)t.hasOwnProperty(i)&&(i in e||(e[i]=t[i]));return e}},{key:"emulateThrow",value:function(e){var t=this,i=0;x.world.addEventListener("postStep",(function a(){t.isFinished()?50===++i&&(x.world.removeEventListener("postStep",a),e(t.getUpsideValue())):i=0,x.world.step(x.world.dt)}))}},{key:"isFinished",value:function(){var e=this.object.body.angularVelocity,t=this.object.body.velocity;return Math.abs(e.x)<1&&Math.abs(e.y)<1&&Math.abs(e.z)<1&&Math.abs(t.x)<1&&Math.abs(t.y)<1&&Math.abs(t.z)<1}},{key:"getUpsideValue",value:function(){for(var e,t=new n.n(0,this.invertUpside?-1:1),i=2*Math.PI,a=0;a<this.object.geometry.faces.length;++a){var o=this.object.geometry.faces[a];if(0!==o.materialIndex){var r=o.normal.clone().applyQuaternion(this.object.body.quaternion).angleTo(t);r<i&&(i=r,e=o)}}return e.materialIndex-1}},{key:"getVisibleVectors",value:function(){return{position:this.object.body.position.clone(),quaternion:this.object.body.quaternion.clone()}}},{key:"getCurrentVectors",value:function(){return{position:this.object.body.position.clone(),quaternion:this.object.body.quaternion.clone(),velocity:this.object.body.velocity.clone(),angularVelocity:this.object.body.angularVelocity.clone()}}},{key:"setVectors",value:function(e){this.object.body.position=e.position,this.object.body.quaternion=e.quaternion,this.object.body.velocity=e.velocity,this.object.body.angularVelocity=e.angularVelocity}},{key:"shiftUpperValue",value:function(e){var t=this.shiftUpperValueCustom(e);if(!t){t=this.object.geometry.clone();for(var i=this.getUpsideValue(),a=0,n=t.faces.length;a<n;++a){var o=t.faces[a].materialIndex;if(0!==o){for(o+=e-i-1;o>this.values;)o-=this.values;for(;o<1;)o+=this.values;t.faces[a].materialIndex=o+1}}}this.object.geometry=t}},{key:"getChamferGeometry",value:function(e,t,i){for(var a=[],o=[],r=new Array(e.length),s=0;s<e.length;++s)r[s]=[];for(var l=0;l<t.length;++l){for(var c=t[l],u=c.length-1,h=new n.n,d=new Array(u),m=0;m<u;++m){var f=e[c[m]].clone();h.add(f),r[c[m]].push(d[m]=a.push(f)-1)}h.divideScalar(u);for(var p=0;p<u;++p){var v=a[d[p]];v.subVectors(v,h).multiplyScalar(i).addVectors(v,h)}d.push(c[u]),o.push(d)}for(var b=0;b<t.length-1;++b)for(var g=b+1;g<t.length;++g){for(var y=[],w=-1,x=0;x<t[b].length-1;++x){var M=t[g].indexOf(t[b][x]);M>=0&&M<t[g].length-1&&(w>=0&&x!==w+1?y.unshift([b,x],[g,M]):y.push([b,x],[g,M]),w=x)}4===y.length&&o.push([o[y[0][0]][y[0][1]],o[y[1][0]][y[1][1]],o[y[3][0]][y[3][1]],o[y[2][0]][y[2][1]],-1])}for(var j=0;j<r.length;++j){for(var C=r[j],V=[C[0]],k=C.length-1;k;){for(var O=t.length;O<o.length;++O){var S=o[O].indexOf(V[V.length-1]);if(S>=0&&S<4){-1==--S&&(S=3);var T=o[O][S];if(C.indexOf(T)>=0){V.push(T);break}}}--k}V.push(-1),o.push(V)}return{vectors:a,faces:o}}},{key:"makeGeometry",value:function(e,t,i,a,o){for(var r=new n.d,s=0;s<e.length;++s){var l=e[s].multiplyScalar(i);l.index=r.vertices.push(l)-1}for(var c=0;c<t.length;++c)for(var u=t[c],h=u.length-1,d=2*Math.PI/h,m=0;m<h-2;++m)r.faces.push(new n.c(u[0],u[m+1],u[m+2],[r.vertices[u[0]],r.vertices[u[m+1]],r.vertices[u[m+2]]],0,u[h]+1)),r.faceVertexUvs[0].push([new n.m((Math.cos(o)+1+a)/2/(1+a),(Math.sin(o)+1+a)/2/(1+a)),new n.m((Math.cos(d*(m+1)+o)+1+a)/2/(1+a),(Math.sin(d*(m+1)+o)+1+a)/2/(1+a)),new n.m((Math.cos(d*(m+2)+o)+1+a)/2/(1+a),(Math.sin(d*(m+2)+o)+1+a)/2/(1+a))]);return r.computeFaceNormals(),r.boundingSphere=new n.j(new n.n,i),r}},{key:"createShape",value:function(e,t,i){for(var n=new Array(e.length),o=new Array(t.length),r=0;r<e.length;++r){var s=e[r];n[r]=new a.Vec3(s.x*i,s.y*i,s.z*i)}for(var l=0;l<t.length;++l)o[l]=t[l].slice(0,t[l].length-1);return new a.ConvexPolyhedron(n,o)}},{key:"getGeometry",value:function(){for(var e=this.size*this.scaleFactor,t=new Array(this.vertices.length),i=0;i<this.vertices.length;++i)t[i]=(new n.n).fromArray(this.vertices[i]).normalize();var a=this.getChamferGeometry(t,this.faces,this.chamfer),o=this.makeGeometry(a.vectors,a.faces,e,this.tab,this.af);return o.cannon_shape=this.createShape(t,this.faces,e),o}},{key:"calculateTextureSize",value:function(e){return Math.max(128,Math.pow(2,Math.floor(Math.log(e)/Math.log(2))))}},{key:"createTextTexture",value:function(e,t,i){var a=document.createElement("canvas"),o=a.getContext("2d"),r=2*this.calculateTextureSize(this.size/2+this.size*this.textMargin);a.width=a.height=r,o.font=r/(1+2*this.textMargin)+"pt Arial",o.fillStyle=i,o.fillRect(0,0,a.width,a.height),o.textAlign="center",o.textBaseline="middle",o.fillStyle=t,o.fillText(e,a.width/2,a.height/2);var s=new n.l(a);return s.needsUpdate=!0,s}},{key:"getMaterials",value:function(){for(var e=[],t=0;t<this.faceTexts.length;++t){var i=null;i=this.customTextTextureFunction?this.customTextTextureFunction(this.faceTexts[t],this.labelColor,this.diceColor):this.createTextTexture(this.faceTexts[t],this.labelColor,this.diceColor),e.push(new n.f(Object.assign({},this.materialOptions,{map:i})))}return e}},{key:"getObject",value:function(){return this.object}},{key:"create",value:function(){if(!x.world)throw new Error("You must call DiceManager.setWorld(world) first.");return this.object=new n.e(this.getGeometry(),this.getMaterials()),this.object.reveiceShadow=!0,this.object.castShadow=!0,this.object.diceObject=this,this.object.body=new a.Body({mass:this.mass,shape:this.object.geometry.cannon_shape,material:x.diceBodyMaterial}),this.object.body.linearDamping=.1,this.object.body.angularDamping=.1,x.world.add(this.object.body),this.object}},{key:"updateMeshFromBody",value:function(){this.simulationRunning||(this.object.position.copy(this.object.body.position),this.object.quaternion.copy(this.object.body.quaternion))}},{key:"updateBodyFromMesh",value:function(){this.object.body.position.copy(this.object.position),this.object.body.quaternion.copy(this.object.quaternion)}},{key:"setMeshFrom",value:function(e){this.object.position.copy(e.position),this.object.quaternion.copy(e.quaternion)}},{key:"shiftUpperValueCustom",value:function(e){return null}}]),e}(),p=function(e){function t(e){var i;return u(this,t),(i=r(this,s(t).call(this,e))).tab=-.1,i.af=7*Math.PI/6,i.chamfer=.96,i.vertices=[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],i.faces=[[1,0,2,1],[0,1,3,2],[0,3,2,3],[1,2,3,4]],i.faceTexts=[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]],i.scaleFactor=1.2,i.values=4,i.d4FaceTexts=[[[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]],[[],[0,0,0],[1,4,3],[2,3,4],[1,2,4],[2,1,3]],[[],[0,0,0],[2,4,1],[3,1,4],[2,3,4],[3,2,1]],[[],[0,0,0],[2,1,3],[4,3,1],[2,4,1],[4,2,3]]],[[[],[0,0,0],[1,4,3],[2,3,4],[1,2,4],[2,1,3]],[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]],[[],[0,0,0],[3,4,2],[1,2,4],[3,1,4],[1,3,2]],[[],[0,0,0],[4,2,3],[1,3,2],[4,1,2],[1,4,3]]],[[[],[0,0,0],[2,4,1],[3,1,4],[2,3,4],[3,2,1]],[[],[0,0,0],[3,4,2],[1,2,4],[3,1,4],[1,3,2]],[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]],[[],[0,0,0],[2,3,4],[1,4,3],[2,1,3],[1,2,4]]],[[[],[0,0,0],[2,1,3],[4,3,1],[2,4,1],[4,2,3]],[[],[0,0,0],[4,2,3],[1,3,2],[4,1,2],[1,4,3]],[[],[0,0,0],[2,3,4],[1,4,3],[2,1,3],[1,2,4]],[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]]]],i.shiftUpperValueCustom=function(e){var t=i.object.geometry,a=i.getUpsideValue();return i.faceTexts=i.d4FaceTexts[a-1][e-1],i.object.material=i.getMaterials(),t},i.customTextTextureFunction=function(e,t,i){var a=document.createElement("canvas"),o=a.getContext("2d"),r=2*this.calculateTextureSize(this.size/2+2*this.size);for(var s in a.width=a.height=r,o.font=r/5+"pt Arial",o.fillStyle=i,o.fillRect(0,0,a.width,a.height),o.textAlign="center",o.textBaseline="middle",o.fillStyle=t,e)o.fillText(e[s],a.width/2,a.height/2-.3*r),o.translate(a.width/2,a.height/2),o.rotate(2*Math.PI/3),o.translate(-a.width/2,-a.height/2);var l=new n.l(a);return l.needsUpdate=!0,l},i.mass=300,i.inertia=5,i.invertUpside=!0,i.create(),i}return l(t,e),t}(f),v=function(e){function t(e){var i;return u(this,t),(i=r(this,s(t).call(this,e))).tab=.1,i.af=Math.PI/4,i.chamfer=.96,i.vertices=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],i.faces=[[0,3,2,1,1],[1,2,6,5,2],[0,1,5,4,3],[3,7,6,2,4],[0,4,7,3,5],[4,5,6,7,6]],i.scaleFactor=.9,i.values=6,i.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],i.textMargin=1,i.mass=300,i.inertia=13,i.create(),i}return l(t,e),t}(f),b=function(e){function t(e){var i;return u(this,t),(i=r(this,s(t).call(this,e))).tab=0,i.af=-Math.PI/4/2,i.chamfer=.965,i.vertices=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i.faces=[[0,2,4,1],[0,4,3,2],[0,3,5,3],[0,5,2,4],[1,3,4,5],[1,4,2,6],[1,2,5,7],[1,5,3,8]],i.scaleFactor=1,i.values=8,i.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],i.textMargin=1.2,i.mass=340,i.inertia=10,i.create(),i}return l(t,e),t}(f),g=function(e){function t(e){var i;u(this,t),(i=r(this,s(t).call(this,e))).tab=0,i.af=6*Math.PI/5,i.chamfer=.945,i.vertices=[],i.faces=[[5,7,11,0],[4,2,10,1],[1,3,11,2],[0,8,10,3],[7,9,11,4],[8,6,10,5],[9,1,11,6],[2,0,10,7],[3,5,11,8],[6,4,10,9],[1,0,2,-1],[1,2,3,-1],[3,2,4,-1],[3,4,5,-1],[5,4,6,-1],[5,6,7,-1],[7,6,8,-1],[7,8,9,-1],[9,8,0,-1],[9,0,1,-1]];for(var a=0,n=0;a<10;++a,n+=2*Math.PI/10)i.vertices.push([Math.cos(n),Math.sin(n),.105*(a%2?1:-1)]);return i.vertices.push([0,0,-1]),i.vertices.push([0,0,1]),i.scaleFactor=.9,i.values=10,i.faceTexts=[" ","0","1","2","3","4","5"," 6.","7","8"," 9.","10","11","12","13","14","15","16","17","18","19","20"],i.textMargin=1,i.mass=350,i.inertia=9,i.create(),i}return l(t,e),t}(f),y=function(e){function t(e){var i;u(this,t),i=r(this,s(t).call(this,e));var a=(1+Math.sqrt(5))/2,n=1/a;return i.tab=.2,i.af=-Math.PI/4/2,i.chamfer=.968,i.vertices=[[0,n,a],[0,n,-a],[0,-n,a],[0,-n,-a],[a,0,n],[a,0,-n],[-a,0,n],[-a,0,-n],[n,a,0],[n,-a,0],[-n,a,0],[-n,-a,0],[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]],i.faces=[[2,14,4,12,0,1],[15,9,11,19,3,2],[16,10,17,7,6,3],[6,7,19,11,18,4],[6,18,2,0,16,5],[18,11,9,14,2,6],[1,17,10,8,13,7],[1,13,5,15,3,8],[13,8,12,4,5,9],[5,4,14,9,15,10],[0,12,8,10,16,11],[3,19,7,17,1,12]],i.scaleFactor=.9,i.values=12,i.faceTexts=[" ","0","1","2","3","4","5"," 6.","7","8"," 9.","10","11","12","13","14","15","16","17","18","19","20"],i.textMargin=1,i.mass=350,i.inertia=8,i.create(),i}return l(t,e),t}(f),w=function(e){function t(e){var i;u(this,t),i=r(this,s(t).call(this,e));var a=(1+Math.sqrt(5))/2;return i.tab=-.2,i.af=-Math.PI/4/2,i.chamfer=.955,i.vertices=[[-1,a,0],[1,a,0],[-1,-a,0],[1,-a,0],[0,-1,a],[0,1,a],[0,-1,-a],[0,1,-a],[a,0,-1],[a,0,1],[-a,0,-1],[-a,0,1]],i.faces=[[0,11,5,1],[0,5,1,2],[0,1,7,3],[0,7,10,4],[0,10,11,5],[1,5,9,6],[5,11,4,7],[11,10,2,8],[10,7,6,9],[7,1,8,10],[3,9,4,11],[3,4,2,12],[3,2,6,13],[3,6,8,14],[3,8,9,15],[4,9,5,16],[2,4,11,17],[6,2,10,18],[8,6,7,19],[9,8,1,20]],i.scaleFactor=1,i.values=20,i.faceTexts=[" ","0","1","2","3","4","5"," 6.","7","8"," 9.","10","11","12","13","14","15","16","17","18","19","20"],i.textMargin=1,i.mass=400,i.inertia=6,i.create(),i}return l(t,e),t}(f),x=new m;"function"==typeof define&&i("PDX0")?define((function(){return{DiceManager:x,DiceD4:p,DiceD6:v,DiceD8:b,DiceD10:g,DiceD12:y,DiceD20:w}})):void 0!==e.exports?e.exports={DiceManager:x,DiceD4:p,DiceD6:v,DiceD8:b,DiceD10:g,DiceD12:y,DiceD20:w}:window.Dice={DiceManager:x,DiceD4:p,DiceD6:v,DiceD8:b,DiceD10:g,DiceD12:y,DiceD20:w}}).call(this,i("3UD+")(e))},AC0x:function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,".animation[data-v-00a32712] {\n  width: 100%;\n  max-width: 1200px;\n  height: 350px;\n}\n.animation[data-v-00a32712] canvas {\n  width: 100% !important;\n  height: auto !important;\n}\n.message-container[data-v-00a32712] {\n  position: relative;\n  height: 0;\n  z-index: 2;\n}\n.message-container .message[data-v-00a32712] {\n  position: absolute;\n  top: 5px;\n  left: 50%;\n  transform: translateX(-50%);\n}",""])},ANr2:function(e,t,i){e.exports=i.p+"audio/dice-3d/roll2.wav"},M1PE:function(e,t,i){e.exports=i.p+"audio/dice-3d/roll1.wav"},OY7U:function(e,t,i){"use strict";var a=i("g6NE");var n={computed:{gamePackageId:function(){return this.$route.params.game},provablyFairGame:function(){return this.$store.getters["provably-fair/get"](this.gamePackageId)||{}}},methods:{getRoute:function(e){return t="games.".concat(this.gamePackageId,".").concat(e),a.a.getters["route/get"](t);var t}}},o=i("KHd+"),r=Object(o.a)(n,void 0,void 0,!1,null,null,null);t.a=r.exports},VA6O:function(e,t,i){e.exports=i.p+"audio/common/click.wav"},VzFJ:function(e,t,i){"use strict";i.r(t);var a=i("o0o1"),n=i.n(a),o=i("9ZTT"),r=i("Womt"),s=i("513U"),l=i("vDqi"),c=i.n(l),u=i("L2JU"),h=i("fpkf"),d=i("C3Ci"),m=i("OY7U"),f=i("fYW3"),p=i("ZXch"),v=i("VA6O"),b=i.n(v),g=i("wWb/"),y=i.n(g),w=i("M1PE"),x=i.n(w),M=i("ANr2"),j=i.n(M),C=i("sS9Z"),V=i.n(C),k=i("/hoC");function O(e,t,i,a,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){D(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var P,R,_={name:"Dice3D",components:{GameMessage:i("7n2z").a,PlayControls:k.a},mixins:[d.a,m.a,f.a],data:function(){return{clickSound:b.a,roll1Sound:x.a,roll2Sound:j.a,formIsValid:!0,loading:!1,playing:!1,refNumber:null,direction:-1,diceFillColor:Object(h.a)("dice-3d.fill_color"),diceFontColor:Object(h.a)("dice-3d.font_color"),bet:parseInt(Object(h.a)("dice-3d.default_bet_amount"),10),roll:0,message:null,animation:{}}},computed:T({},Object(u.d)("auth",["account"]),{dices:function(){return Object(h.a)("dice-3d.dice")},minRoll:function(){return Object(h.a)("dice-3d.dice").length},maxRoll:function(){return Object(h.a)("dice-3d.dice").reduce((function(e,t){return e+=Object(h.a)("dice-3d.dice_types")[t].max}),0)},rollsRangeLength:function(){return this.maxRoll-this.minRoll+1},minRefNumber:function(){return this.minRoll+1},maxRefNumber:function(){return this.maxRoll},houseEdge:function(){return Object(h.a)("dice-3d.house_edge")},winChance:function(){var e=-1===this.direction?(this.refNumber-this.minRoll)/this.rollsRangeLength*100:(this.maxRoll-this.refNumber+1)/this.rollsRangeLength*100;return Object(p.k)(e,2)},payout:function(){var e=(100-this.houseEdge)/this.winChance;return Object(p.k)(e,4)},rollLessText:function(){return this.minRoll<this.refNumber-1?this.$t("Roll {0} - {1}",[this.minRoll,this.refNumber-1]):this.$t("Roll {0}",[this.refNumber-1])},rollGreaterText:function(){return this.maxRoll>this.refNumber?this.$t("Roll {0} - {1}",[this.refNumber,this.maxRoll]):this.$t("Roll {0}",[this.refNumber])},sliderTrackColor:function(){return-1===this.direction?"grey":"primary"},sliderFillColor:function(){return-1===this.direction?"primary":"grey"}}),created:function(){this.refNumber=this.minRoll+Math.floor((this.maxRoll-this.minRoll)/2)},mounted:function(){var e=this;window.dice=this,this.animation={pos:null,velocity:null,container:null,scene:null,camera:null,renderer:null,world:null,floorWidth:0,floorHeight:0,width:this.$refs.ThreeJS.offsetWidth,height:this.$refs.ThreeJS.offsetHeight,aspect:this.$refs.ThreeJS.offsetWidth/this.$refs.ThreeJS.offsetHeight,camera_angle:10,camera_position:100,near:.01,far:1e4,diceValues:[],diceAnimationStep:0,isThrought:!1,dice:[],animate:function(){var t;if(e.animation.isThrought){for(t in e.animation.dice)e.animation.diceValues[t].steps.length>e.animation.diceAnimationStep&&e.animation.dice[t].setMeshFrom(e.animation.diceValues[t].steps[e.animation.diceAnimationStep]),e.animation.diceValues[t].sound.length>e.animation.diceAnimationStep&&e.animation.diceValues[t].sound[e.animation.diceAnimationStep]&&e.animation.diceValues[t].lastSound<e.animation.diceAnimationStep&&(0===e.animation.diceValues[t].lastSound?e.sound(e.roll1Sound):e.sound(e.roll2Sound),e.animation.diceValues[t].lastSound=e.animation.diceAnimationStep+5);e.animation.diceAnimationStep++}if(e.animation.renderer.render(e.animation.scene,e.animation.camera),requestAnimationFrame(e.animation.animate),e.animation.isThrought){var i=!0;for(t=0;t<e.animation.dice.length;t++)i=i&&!(e.animation.diceValues[t].steps.length>e.animation.diceAnimationStep);i&&(e.playing=!1,e.updateUserAccountBalance(e.animation.result.balance),e.animation.result.win>0?(e.sound(y.a),e.message=e.$t("You rolled")+" "+e.roll+" "+e.$t("and won")+" "+e.animation.result.win):(e.sound(V.a),e.message=e.$t("You rolled")+" "+e.roll),e.animation.isThrought=!1)}}},this.animation.scene=new r.i,this.animation.camera=new r.h(this.animation.camera_angle,this.animation.aspect,this.animation.near,this.animation.far),this.animation.scene.add(this.animation.camera),this.animation.camera.position.set(0,this.animation.camera_position,0),this.animation.camera.lookAt(0,0,0),this.animation.renderer=new r.o({antialias:!0,alpha:!0}),this.animation.renderer.setClearColor(0,0),this.animation.renderer.setSize(2*this.animation.width,2*this.animation.height),this.animation.renderer.shadowMap.enabled=!0,this.animation.renderer.shadowMap.type=r.g,this.animation.container=this.$refs.ThreeJS,this.animation.container.appendChild(this.animation.renderer.domElement);var t=new r.a("#ffffff",.5);this.animation.scene.add(t);var i=new r.b("#ffffff",.2);i.position.x=-1e3,i.position.y=1e3,i.position.z=1e3,this.animation.scene.add(i);var a=new r.k(15720405,.5);a.position.y=200,a.target.position.set(0,0,0),a.castShadow=!0,a.shadow.camera.near=50,a.shadow.camera.far=110,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,this.animation.scene.add(a),this.animation.floorHeight=2*Math.tan(this.animation.camera.fov*Math.PI/180/2)*Math.abs(this.animation.camera.position.y),this.animation.floorWidth=this.animation.floorHeight*this.animation.camera.aspect,this.animation.world=new o.World,this.animation.world.gravity.set(0,-98.2,0),this.animation.world.broadphase=new o.NaiveBroadphase,this.animation.world.solver.iterations=16,s.g.setWorld(this.animation.world);var n,l=new o.Body({mass:0,shape:new o.Plane,material:s.g.floorBodyMaterial});l.quaternion.setFromAxisAngle(new o.Vec3(1,0,0),-Math.PI/2),this.animation.world.add(l);(n=new o.Body({mass:0,shape:new o.Plane,material:s.g.barrierBodyMaterial})).quaternion.setFromAxisAngle(new o.Vec3(0,1,0),-Math.PI),n.position.set(0,0,.85*this.animation.floorHeight/2),this.animation.world.add(n),(n=new o.Body({mass:0,shape:new o.Plane,material:s.g.barrierBodyMaterial})).quaternion.setFromAxisAngle(new o.Vec3(0,1,0),0),n.position.set(0,0,-.85*this.animation.floorHeight/2),this.animation.world.add(n),window.barrier=n,window.CANNON=o,(n=new o.Body({mass:0,shape:new o.Plane,material:s.g.barrierBodyMaterial})).quaternion.setFromAxisAngle(new o.Vec3(0,1,0),-Math.PI/2),n.position.set(.85*this.animation.floorWidth/2,0,0),this.animation.world.add(n),(n=new o.Body({mass:0,shape:new o.Plane,material:s.g.barrierBodyMaterial})).quaternion.setFromAxisAngle(new o.Vec3(0,1,0),Math.PI/2),n.position.set(-.85*this.animation.floorWidth/2,0,0),this.animation.world.add(n);var c=this.diceFontColor,u=this.diceFillColor;this.dices.forEach((function(t,i){var a;switch(t){case"tetrahedron":a=new s.d({size:1.5,backColor:u,fontColor:c});break;case"cube":a=new s.e({size:1.5,backColor:u,fontColor:c});break;case"octahedron":a=new s.f({size:1.5,backColor:u,fontColor:c});break;case"dipyramid":a=new s.a({size:1.5,backColor:u,fontColor:c});break;case"dodecahedron":a=new s.b({size:1.5,backColor:u,fontColor:c});break;case"icosahedron":a=new s.c({size:1.5,backColor:u,fontColor:c})}e.animation.scene.add(a.getObject()),e.animation.dice.push(a)})),this.animation.diceThrow=function(){null==e.animation.pos&&e.animation.randomDiceThrow();var t,i=e.animation.pos,a=e.animation.velocity;for(e.animation.isThrought=!0,e.animation.diceAnimationStep=0,e.animation.diceValues=[],Math.abs(a.x)>100&&(a.x/=Math.abs(a.x)/100),Math.abs(a.y)>100&&(a.y/=Math.abs(a.y)/100),Math.abs(a.z)>100&&(a.z/=Math.abs(a.z)/100),t=0;t<e.animation.dice.length;t++)e.animation.dice[t].getObject().position.x=i.x-t%3*1.5,e.animation.dice[t].getObject().position.y=i.y+1.5*Math.floor(t/3),e.animation.dice[t].getObject().position.z=i.z+t%3*1.5,e.animation.dice[t].updateBodyFromMesh(),e.animation.dice[t].getObject().body.velocity.set(a.x,a.y,a.z),e.animation.dice[t].getObject().body.angularVelocity.set(10*Math.random()-10,10*Math.random()-10,10*Math.random()-10),e.animation.diceValues.push({dice:e.animation.dice[t],value:t+1});var n=e.roll;for(t=0;t<e.animation.diceValues.length;t++)e.animation.diceValues[t].value=Math.ceil(Math.random()*Math.min(e.animation.diceValues[t].dice.values,n-(e.animation.diceValues.length-t-1))),n-=e.animation.diceValues[t].value;for(;n>0;)for(t=0;t<e.animation.diceValues.length;t++)if(e.animation.diceValues[t].value<e.animation.diceValues[t].dice.values){var o=Math.ceil(Math.random()*Math.min(e.animation.diceValues[t].dice.values-e.animation.diceValues[t].value,n));if(e.animation.diceValues[t].value+=o,(n-=o)<=0)break}s.g.prepareValues(e.animation.diceValues,l),e.animation.pos=null,e.animation.velocity=null};var h=function(e){var t=Math.random()*Math.PI/5-Math.PI/5/2,i={x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)};return 0===i.x&&(i.x=.01),0===i.y&&(i.y=.01),i};this.animation.randomDiceThrow=function(){var t=Math.random(),i={x:(2*t-1)*e.animation.floorWidth,y:-(2*t-1)*e.animation.floorHeight},a=.1*Math.sqrt(i.x*i.x+i.y*i.y),n=h(i),o={x:e.animation.floorWidth/2*(n.x>0?-1:1)*.9,y:10,z:e.animation.floorHeight/2*(n.y>0?-1:1)*.9},r=Math.abs(n.x/n.y);r>1?o.z/=r:o.x*=r;var s=h(i),l={x:s.x*a,y:-.01,z:s.y*a};e.animation.pos=o,e.animation.velocity=l};var d=function(e){var t=e.changedTouches;return t?{x:t[0].clientX,y:t[0].clientY}:{x:e.clientX,y:e.clientY}},m=function(t){t.preventDefault(),e.playing||(e.animation.mouse_time=(new Date).getTime(),e.animation.mouse_start=d(t))},f=function(t){if(void 0!==e.animation.mouse_start){t.stopPropagation();var i=d(t),a={x:i.x-e.animation.mouse_start.x,y:i.y-e.animation.mouse_start.y};e.animation.mouse_start=void 0;var n=Math.sqrt(a.x*a.x+a.y*a.y);if(!(n<Math.sqrt(e.animation.floorWidth*e.animation.floorHeight*.01))){var o=(new Date).getTime()-e.animation.mouse_time;o>2e3&&(o=2e3);var r=Math.sqrt((2500-o)/2500)*n*.001,s=h(a),l={x:e.animation.floorWidth/2*(s.x>0?-1:1)*.9,y:10,z:e.animation.floorHeight/2*(s.y>0?-1:1)*.9},c=Math.abs(s.x/s.y);c>1?l.z/=c:l.x*=c;var u=h(a),m={x:u.x*r,y:-.01,z:u.y*r};e.animation.pos=l,e.animation.velocity=m,e.play(e.bet)}}};this.animation.renderer.domElement.addEventListener("mousedown",m),this.animation.renderer.domElement.addEventListener("mouseup",f),this.animation.renderer.domElement.addEventListener("touchstart",m),this.animation.renderer.domElement.addEventListener("touchend",f),this.animation.world.step(1/60),requestAnimationFrame(this.animation.animate),this.animation.start=function(){e.animation.diceValues=[];for(var t=0;t<e.animation.dice.length;t++)e.animation.dice[t].getObject().position.x=t%3*1.7,e.animation.dice[t].getObject().position.y=15+1.7*Math.floor(t/3),e.animation.dice[t].getObject().position.z=t%3*1.7,e.animation.dice[t].getObject().quaternion.x=0,e.animation.dice[t].getObject().quaternion.y=0,e.animation.dice[t].getObject().quaternion.z=0,e.animation.dice[t].updateBodyFromMesh(),e.animation.dice[t].getObject().body.velocity.set(0,10,0),e.animation.dice[t].getObject().body.angularVelocity.set(0,5,0),e.animation.diceValues.push({dice:e.animation.dice[t],value:t+1});s.g.prepareValues(e.animation.diceValues,l),e.animation.dice.forEach((function(e){return e.updateMeshFromBody()}))},this.animation.start()},beforeDestroy:function(){this.animation.animate=function(){}},methods:T({},Object(u.b)({updateUserAccountBalance:"auth/updateUserAccountBalance",setProvablyFairGame:"provably-fair/set"}),{play:(P=n.a.mark((function e(t){var i,a,o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.playing=!0,this.message=null,this.updateUserAccountBalance(this.account.balance-t),i=this.getRoute("play"),a={hash:this.provablyFairGame.hash,bet:t,direction:this.direction,ref_number:this.refNumber},e.next=8,c.a.post(i,a);case 8:o=e.sent,r=o.data,this.loading=!1,this.roll=r.gameable.roll,this.setProvablyFairGame({key:this.gamePackageId,game:r.pf_game}),this.animation.result={balance:r.account.balance,win:r.win},this.animation.diceThrow();case 15:case"end":return e.stop()}}),e,this)})),R=function(){var e=this,t=arguments;return new Promise((function(i,a){var n=P.apply(e,t);function o(e){O(n,i,a,o,r,"next",e)}function r(e){O(n,i,a,o,r,"throw",e)}o(void 0)}))},function(e){return R.apply(this,arguments)}),decrementRefNumber:function(){this.refNumber=Math.max(this.minRefNumber,--this.refNumber)},incrementRefNumber:function(){this.refNumber=Math.min(this.maxRefNumber,++this.refNumber)}})},z=(i("qmWR"),i("KHd+")),A=i("ZUTo"),F=i.n(A),B=i("gzZi"),E=i("pgmH"),N=i("Yq0q"),q=i("S9TP"),I=i("Ey0z"),U=i("ug2X"),W=i("hlRy"),$=Object(z.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex flex-column fill-height py-3"},[i("div",{staticClass:"message-container"},[i("game-message",{staticClass:"message",attrs:{message:e.message}})],1),e._v(" "),i("div",{staticClass:"d-flex justify-center fill-height align-center"},[i("div",{ref:"ThreeJS",staticClass:"animation",attrs:{click:e.play}})]),e._v(" "),i("div",{staticClass:"d-flex justify-center flex-column"},[i("v-slider",{staticClass:"px-5",attrs:{"thumb-label":"always",min:e.minRefNumber,max:e.maxRefNumber,step:1,"track-color":e.sliderTrackColor,"track-fill-color":e.sliderFillColor},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("v-icon",{on:{click:e.decrementRefNumber}},[e._v("\n          mdi-minus\n        ")])]},proxy:!0},{key:"append",fn:function(){return[i("v-icon",{on:{click:e.incrementRefNumber}},[e._v("\n          mdi-plus\n        ")])]},proxy:!0}]),model:{value:e.refNumber,callback:function(t){e.refNumber=t},expression:"refNumber"}}),e._v(" "),i("div",{staticClass:"align-self-center"},[i("v-form",{staticClass:"d-md-flex",model:{value:e.formIsValid,callback:function(t){e.formIsValid=t},expression:"formIsValid"}},[i("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{staticClass:"text-center flex-grow-0 mr-0 mr-lg-2",attrs:{value:e.winChance,dense:"",outlined:"","full-width":!1,label:e.$t("Win chance"),disabled:!0}})],1),e._v(" "),i("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[i("v-text-field",{staticClass:"text-center flex-grow-0 ml-0 ml-lg-2",attrs:{value:e.payout,dense:"",outlined:"","full-width":!1,label:e.$t("Payout"),disabled:!0}})],1)],1)],1),e._v(" "),i("v-btn-toggle",{staticClass:"align-self-center mb-3",attrs:{"active-class":"primary--text",mandatory:"",rounded:"",group:""},model:{value:e.direction,callback:function(t){e.direction=t},expression:"direction"}},[i("v-btn",{staticClass:"mx-1",attrs:{disabled:e.playing,small:"",value:-1},on:{click:function(t){return e.sound(e.clickSound)}}},[e._v("\n        "+e._s(e.rollLessText)+"\n      ")]),e._v(" "),i("v-btn",{staticClass:"mx-1",attrs:{disabled:e.playing,small:"",value:1},on:{click:function(t){return e.sound(e.clickSound)}}},[e._v("\n        "+e._s(e.rollGreaterText)+"\n      ")])],1)],1),e._v(" "),i("play-controls",{attrs:{loading:e.loading,playing:e.playing,disabled:!e.formIsValid},on:{"bet-change":function(t){e.bet=t},play:e.play}})],1)}),[],!1,null,"00a32712",null);t.default=$.exports;F()($,{VBtn:B.a,VBtnToggle:E.a,VCol:N.a,VForm:q.a,VIcon:I.a,VSlider:U.a,VTextField:W.a})},pYZe:function(e,t,i){var a=i("AC0x");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,n);a.locals&&(e.exports=a.locals)},qmWR:function(e,t,i){"use strict";var a=i("pYZe");i.n(a).a},sS9Z:function(e,t,i){e.exports=i.p+"audio/dice-3d/lose.wav"},"wWb/":function(e,t,i){e.exports=i.p+"audio/dice-3d/win.wav"}}]);
//# sourceMappingURL=dice-3d-resources-js-pages-game.js.map