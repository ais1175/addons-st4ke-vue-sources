{"version":3,"sources":["webpack:///./packages/dice-3d/resources/js/components/dice.js","webpack:///./packages/dice-3d/resources/js/pages/game.vue?5074","webpack:///./packages/dice-3d/resources/audio/roll2.wav","webpack:///./packages/dice-3d/resources/audio/roll1.wav","webpack:///resources/js/mixins/Game.vue","webpack:///./resources/js/mixins/Game.vue?b66b","webpack:///./resources/js/plugins/route.js","webpack:///./resources/js/mixins/Game.vue","webpack:///./resources/audio/common/click.wav","webpack:///./packages/dice-3d/resources/js/pages/game.vue?d931","webpack:///packages/dice-3d/resources/js/pages/game.vue","webpack:///./packages/dice-3d/resources/js/pages/game.vue?6e57","webpack:///./packages/dice-3d/resources/js/pages/game.vue","webpack:///./packages/dice-3d/resources/js/pages/game.vue?2c01","webpack:///./packages/dice-3d/resources/js/pages/game.vue?38b8","webpack:///./packages/dice-3d/resources/audio/lose.wav","webpack:///./packages/dice-3d/resources/audio/win.wav"],"names":["DiceManagerClass","this","world","diceBodyMaterial","CANNON","floorBodyMaterial","barrierBodyMaterial","addContactMaterial","friction","restitution","diceValues","floorBody","throwRunning","Error","i","length","value","dice","values","simulationRunning","stableCount","steps","sound","lastSound","push","getVisibleVectors","isContacts","collide","addEventListener","check","allStable","isFinished","simulateStep","DiceManager","removeEventListener","shiftUpperValue","step","DiceObject","options","setDefaults","size","fontColor","backColor","object","invertUpside","materialOptions","specular","color","shininess","flatShading","labelColor","diceColor","defaults","key","hasOwnProperty","callback","getUpsideValue","dt","angularVelocity","body","velocity","Math","abs","x","y","z","closestFace","vector","THREE","closestAngle","PI","geometry","faces","face","materialIndex","angle","normal","clone","applyQuaternion","quaternion","angleTo","position","vectors","toValue","shiftUpperValueCustom","fromValue","l","chamfer","chamferVectors","chamferFaces","cornerFaces","Array","ii","fl","centerPoint","j","vv","add","divideScalar","subVectors","multiplyScalar","addVectors","pairs","lastm","m","n","indexOf","unshift","cf","count","index","nextVertex","vertices","radius","tab","af","geom","vertex","aa","faceVertexUvs","cos","sin","computeFaceNormals","boundingSphere","cv","v","slice","scaleFactor","fromArray","normalize","chamferGeometry","getChamferGeometry","makeGeometry","cannon_shape","createShape","approx","max","pow","floor","log","text","canvas","document","createElement","context","getContext","ts","calculateTextureSize","textMargin","width","height","font","fillStyle","fillRect","textAlign","textBaseline","fillText","texture","needsUpdate","materials","faceTexts","customTextTextureFunction","createTextTexture","Object","assign","map","getGeometry","getMaterials","reveiceShadow","castShadow","diceObject","mass","shape","material","linearDamping","angularDamping","copy","diceValue","DiceD4","d4FaceTexts","diceValueNew","translate","rotate","inertia","create","DiceD6","DiceD8","DiceD10","b","DiceD12","p","sqrt","q","DiceD20","t","define","module","exports","window","Dice","computed","gamePackageId","$route","params","game","provablyFairGame","$store","getters","methods","getRoute","name","store","component","render","staticRenderFns","components","mixins","Form","data","clickSound","roll1Sound","roll2Sound","formIsValid","loading","playing","refNumber","direction","diceFillColor","diceFontColor","bet","parseInt","roll","message","animation","dices","minRoll","maxRoll","rollsRangeLength","minRefNumber","maxRefNumber","houseEdge","winChance","payout","rollLessText","rollGreaterText","sliderTrackColor","sliderFillColor","created","mounted","pos","container","scene","camera","renderer","floorWidth","floorHeight","$refs","ThreeJS","offsetWidth","offsetHeight","aspect","camera_angle","camera_position","near","far","diceAnimationStep","isThrought","animate","requestAnimationFrame","set","lookAt","setClearColor","setSize","shadowMap","enabled","type","appendChild","domElement","ambient","directionalLight","light","target","shadow","mapSize","tan","fov","gravity","broadphase","solver","iterations","barrier","setFromAxisAngle","forEach","d","diceThrow","ceil","random","min","randomAngle","vec","randomDiceThrow","rnd","boost","makeRandomVector","projector","velvec","touches","ev","changedTouches","preventDefault","stopPropagation","getMouseCoords","dist","timeInt","mouseStart","mouseEnd","start","beforeDestroy","decrementRefNumber","incrementRefNumber","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","ref","play","scopedSlots","_u","fn","on","proxy","model","$$v","expression","$t","$event","_s","VBtn","VBtnToggle","VCol","VForm","VIcon","VSlider","VTextField","content","transform","undefined","locals"],"mappings":"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,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,KAE5D,CACI,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,KAE5D,CACI,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IACxD,CAAC,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG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","file":"js/games/dice-3d-resources-js-pages-game.js","sourcesContent":["import * as CANNON from 'cannon'\nimport * as THREE from 'three'\n\nclass DiceManagerClass {\n    constructor () {\n        this.world = null\n    }\n\n    setWorld (world) {\n        this.world = world\n\n        this.diceBodyMaterial = new CANNON.Material()\n        this.floorBodyMaterial = new CANNON.Material()\n        this.barrierBodyMaterial = new CANNON.Material()\n\n        world.addContactMaterial(\n            new CANNON.ContactMaterial(this.floorBodyMaterial, this.diceBodyMaterial, { friction: 0.01, restitution: 0.5 })\n        )\n        world.addContactMaterial(\n            new CANNON.ContactMaterial(this.barrierBodyMaterial, this.diceBodyMaterial, { friction: 0, restitution: 1.0 })\n        )\n        world.addContactMaterial(\n            new CANNON.ContactMaterial(this.diceBodyMaterial, this.diceBodyMaterial, { friction: 0, restitution: 0.5 })\n        )\n    }\n\n    /**\n     *\n     * @param {array} diceValues\n     * @param {DiceObject} [diceValues.dice]\n     * @param {number} [diceValues.value]\n     *\n     */\n    prepareValues (diceValues, floorBody) {\n        if (this.throwRunning) throw new Error('Cannot start another throw. Please wait, till the current throw is finished.')\n\n        for (let i = 0; i < diceValues.length; i++) {\n            if (diceValues[i].value < 1 || diceValues[i].dice.values < diceValues[i].value) {\n                throw new Error('Cannot throw die to value ' + diceValues[i].value + ', because it has only ' + diceValues[i].dice.values + ' sides.')\n            }\n        }\n        this.throwRunning = true\n        for (let i = 0; i < diceValues.length; i++) {\n            diceValues[i].dice.simulationRunning = true\n            // diceValues[i].vectors = diceValues[i].dice.getCurrentVectors();\n            diceValues[i].stableCount = 0\n            diceValues[i].steps = []\n            diceValues[i].sound = []\n            diceValues[i].lastSound = 0\n            diceValues[i].steps.push(diceValues[i].dice.getVisibleVectors())\n        }\n        var isContacts = false\n        const collide = () => { isContacts = true }\n        floorBody.addEventListener('collide', collide)\n        const check = () => {\n            let allStable = true\n            for (let i = 0; i < diceValues.length; i++) {\n                if (diceValues[i].dice.isFinished()) {\n                    diceValues[i].stableCount++\n                } else {\n                    diceValues[i].stableCount = 0\n                }\n\n                if (diceValues[i].stableCount < 50) {\n                    allStable = false\n                }\n                diceValues[i].steps.push(diceValues[i].dice.getVisibleVectors())\n                diceValues[i].sound.push(isContacts)\n            }\n            isContacts = false\n            this.simulateStep++\n            if (allStable) {\n                // console.log(\"all stable\",this.simulateStep);\n                DiceManager.world.removeEventListener('postStep', check)\n                floorBody.removeEventListener('collide', collide)\n                for (let i = 0; i < diceValues.length; i++) {\n                    // console.log('Dice ',i,diceValues[i].value,diceValues[i].dice.getUpsideValue())\n                    diceValues[i].dice.shiftUpperValue(diceValues[i].value)\n                    // diceValues[i].dice.setVectors(diceValues[i].vectors);\n                    diceValues[i].dice.simulationRunning = false\n                }\n                this.throwRunning = false\n            } else {\n                DiceManager.world.step(1.00 / 60.00)\n            }\n        }\n\n        this.world.addEventListener('postStep', check)\n        DiceManager.world.step(1.00 / 60.00)\n    }\n}\n\nclass DiceObject {\n    /**\n     * @constructor\n     * @param {object} options\n     * @param {Number} [options.size = 100]\n     * @param {Number} [options.fontColor = '#000000']\n     * @param {Number} [options.backColor = '#ffffff']\n     */\n    constructor (options) {\n        options = this.setDefaults(options, {\n            size: 100,\n            fontColor: '#000000',\n            backColor: '#ffffff'\n        })\n\n        this.object = null\n        this.size = options.size\n        this.invertUpside = false\n\n        this.materialOptions = {\n            specular: 0x172022,\n            color: 0xf0f0f0,\n            shininess: 40,\n            flatShading: true\n        }\n        this.labelColor = options.fontColor\n        this.diceColor = options.backColor\n    }\n\n    setDefaults (options, defaults) {\n        options = options || {}\n\n        for (const key in defaults) {\n            if (!defaults.hasOwnProperty(key)) continue\n\n            if (!(key in options)) {\n                options[key] = defaults[key]\n            }\n        }\n\n        return options\n    }\n\n    emulateThrow (callback) {\n        let stableCount = 0\n\n        const check = () => {\n            if (this.isFinished()) {\n                stableCount++\n\n                if (stableCount === 50) {\n                    DiceManager.world.removeEventListener('postStep', check)\n                    callback(this.getUpsideValue())\n                }\n            } else {\n                stableCount = 0\n            }\n\n            DiceManager.world.step(DiceManager.world.dt)\n        }\n\n        DiceManager.world.addEventListener('postStep', check)\n    }\n\n    isFinished () {\n        const threshold = 1\n\n        const angularVelocity = this.object.body.angularVelocity\n        const velocity = this.object.body.velocity\n\n        return (\n                    Math.abs(angularVelocity.x) < threshold &&\n                    Math.abs(angularVelocity.y) < threshold &&\n                    Math.abs(angularVelocity.z) < threshold &&\n                    Math.abs(velocity.x) < threshold &&\n                    Math.abs(velocity.y) < threshold &&\n                    Math.abs(velocity.z) < threshold)\n    }\n\n    getUpsideValue () {\n        const vector = new THREE.Vector3(0, this.invertUpside ? -1 : 1)\n        let closestFace\n        let closestAngle = Math.PI * 2\n        for (let i = 0; i < this.object.geometry.faces.length; ++i) {\n            const face = this.object.geometry.faces[i]\n            if (face.materialIndex === 0) continue\n\n            const angle = face.normal.clone().applyQuaternion(this.object.body.quaternion).angleTo(vector)\n            if (angle < closestAngle) {\n                closestAngle = angle\n                closestFace = face\n            }\n        }\n\n        return closestFace.materialIndex - 1\n    }\n\n    getVisibleVectors () {\n        return {\n            position: this.object.body.position.clone(),\n            quaternion: this.object.body.quaternion.clone()\n        }\n    }\n\n    getCurrentVectors () {\n        return {\n            position: this.object.body.position.clone(),\n            quaternion: this.object.body.quaternion.clone(),\n            velocity: this.object.body.velocity.clone(),\n            angularVelocity: this.object.body.angularVelocity.clone()\n        }\n    }\n\n    setVectors (vectors) {\n        this.object.body.position = vectors.position\n        this.object.body.quaternion = vectors.quaternion\n        this.object.body.velocity = vectors.velocity\n        this.object.body.angularVelocity = vectors.angularVelocity\n    }\n\n    shiftUpperValue (toValue) {\n        var geometry = this.shiftUpperValueCustom(toValue)\n        if (!geometry) {\n            geometry = this.object.geometry.clone()\n            const fromValue = this.getUpsideValue()\n\n            for (let i = 0, l = geometry.faces.length; i < l; ++i) {\n                let materialIndex = geometry.faces[i].materialIndex\n                if (materialIndex === 0) continue\n\n                materialIndex += toValue - fromValue - 1\n                while (materialIndex > this.values) materialIndex -= this.values\n                while (materialIndex < 1) materialIndex += this.values\n\n                geometry.faces[i].materialIndex = materialIndex + 1\n            }\n        }\n        this.object.geometry = geometry\n    }\n\n    getChamferGeometry (vectors, faces, chamfer) {\n        const chamferVectors = []; const chamferFaces = []; const cornerFaces = new Array(vectors.length)\n        for (let i = 0; i < vectors.length; ++i) cornerFaces[i] = []\n        for (let i = 0; i < faces.length; ++i) {\n            const ii = faces[i]; const fl = ii.length - 1\n            const centerPoint = new THREE.Vector3()\n            const face = new Array(fl)\n            for (let j = 0; j < fl; ++j) {\n                const vv = vectors[ii[j]].clone()\n                centerPoint.add(vv)\n                cornerFaces[ii[j]].push(face[j] = chamferVectors.push(vv) - 1)\n            }\n            centerPoint.divideScalar(fl)\n            for (let j = 0; j < fl; ++j) {\n                const vv = chamferVectors[face[j]]\n                vv.subVectors(vv, centerPoint).multiplyScalar(chamfer).addVectors(vv, centerPoint)\n            }\n            face.push(ii[fl])\n            chamferFaces.push(face)\n        }\n        for (let i = 0; i < faces.length - 1; ++i) {\n            for (let j = i + 1; j < faces.length; ++j) {\n                const pairs = []; let lastm = -1\n                for (let m = 0; m < faces[i].length - 1; ++m) {\n                    const n = faces[j].indexOf(faces[i][m])\n                    if (n >= 0 && n < faces[j].length - 1) {\n                        if (lastm >= 0 && m !== lastm + 1) pairs.unshift([i, m], [j, n])\n                        else pairs.push([i, m], [j, n])\n                        lastm = m\n                    }\n                }\n                if (pairs.length !== 4) continue\n                chamferFaces.push([chamferFaces[pairs[0][0]][pairs[0][1]],\n                chamferFaces[pairs[1][0]][pairs[1][1]],\n                chamferFaces[pairs[3][0]][pairs[3][1]],\n                chamferFaces[pairs[2][0]][pairs[2][1]], -1])\n            }\n        }\n        for (let i = 0; i < cornerFaces.length; ++i) {\n            const cf = cornerFaces[i]; const face = [cf[0]]; let count = cf.length - 1\n            while (count) {\n                for (let m = faces.length; m < chamferFaces.length; ++m) {\n                    let index = chamferFaces[m].indexOf(face[face.length - 1])\n                    if (index >= 0 && index < 4) {\n                        if (--index === -1) index = 3\n                        const nextVertex = chamferFaces[m][index]\n                        if (cf.indexOf(nextVertex) >= 0) {\n                            face.push(nextVertex)\n                            break\n                        }\n                    }\n                }\n                --count\n            }\n            face.push(-1)\n            chamferFaces.push(face)\n        }\n        return { vectors: chamferVectors, faces: chamferFaces }\n    }\n\n    makeGeometry (vertices, faces, radius, tab, af) {\n        const geom = new THREE.Geometry()\n        for (let i = 0; i < vertices.length; ++i) {\n            const vertex = vertices[i].multiplyScalar(radius)\n            vertex.index = geom.vertices.push(vertex) - 1\n        }\n        for (let i = 0; i < faces.length; ++i) {\n            const ii = faces[i]; const fl = ii.length - 1\n            const aa = Math.PI * 2 / fl\n            for (let j = 0; j < fl - 2; ++j) {\n                geom.faces.push(new THREE.Face3(ii[0], ii[j + 1], ii[j + 2], [geom.vertices[ii[0]],\n                geom.vertices[ii[j + 1]], geom.vertices[ii[j + 2]]], 0, ii[fl] + 1))\n                geom.faceVertexUvs[0].push([\n                    new THREE.Vector2((Math.cos(af) + 1 + tab) / 2 / (1 + tab),\n                        (Math.sin(af) + 1 + tab) / 2 / (1 + tab)),\n                    new THREE.Vector2((Math.cos(aa * (j + 1) + af) + 1 + tab) / 2 / (1 + tab),\n                        (Math.sin(aa * (j + 1) + af) + 1 + tab) / 2 / (1 + tab)),\n                    new THREE.Vector2((Math.cos(aa * (j + 2) + af) + 1 + tab) / 2 / (1 + tab),\n                        (Math.sin(aa * (j + 2) + af) + 1 + tab) / 2 / (1 + tab))])\n            }\n        }\n        geom.computeFaceNormals()\n        geom.boundingSphere = new THREE.Sphere(new THREE.Vector3(), radius)\n        return geom\n    }\n\n    createShape (vertices, faces, radius) {\n        const cv = new Array(vertices.length); const cf = new Array(faces.length)\n        for (let i = 0; i < vertices.length; ++i) {\n            const v = vertices[i]\n            cv[i] = new CANNON.Vec3(v.x * radius, v.y * radius, v.z * radius)\n        }\n        for (let i = 0; i < faces.length; ++i) {\n            cf[i] = faces[i].slice(0, faces[i].length - 1)\n        }\n        return new CANNON.ConvexPolyhedron(cv, cf)\n    }\n\n    getGeometry () {\n        const radius = this.size * this.scaleFactor\n\n        const vectors = new Array(this.vertices.length)\n        for (let i = 0; i < this.vertices.length; ++i) {\n            vectors[i] = (new THREE.Vector3()).fromArray(this.vertices[i]).normalize()\n        }\n\n        const chamferGeometry = this.getChamferGeometry(vectors, this.faces, this.chamfer)\n        const geometry = this.makeGeometry(chamferGeometry.vectors, chamferGeometry.faces, radius, this.tab, this.af)\n        geometry.cannon_shape = this.createShape(vectors, this.faces, radius)\n\n        return geometry\n    }\n\n    calculateTextureSize (approx) {\n        return Math.max(128, Math.pow(2, Math.floor(Math.log(approx) / Math.log(2))))\n    }\n\n    createTextTexture (text, color, backColor) {\n        const canvas = document.createElement('canvas')\n        const context = canvas.getContext('2d')\n        const ts = this.calculateTextureSize(this.size / 2 + this.size * this.textMargin) * 2\n        canvas.width = canvas.height = ts\n        context.font = ts / (1 + 2 * this.textMargin) + 'pt Arial'\n        context.fillStyle = backColor\n        context.fillRect(0, 0, canvas.width, canvas.height)\n        context.textAlign = 'center'\n        context.textBaseline = 'middle'\n        context.fillStyle = color\n        context.fillText(text, canvas.width / 2, canvas.height / 2)\n        const texture = new THREE.Texture(canvas)\n        texture.needsUpdate = true\n        return texture\n    }\n\n    getMaterials () {\n        const materials = []\n        for (let i = 0; i < this.faceTexts.length; ++i) {\n            let texture = null\n            if (this.customTextTextureFunction) {\n                texture = this.customTextTextureFunction(this.faceTexts[i], this.labelColor, this.diceColor)\n            } else {\n                texture = this.createTextTexture(this.faceTexts[i], this.labelColor, this.diceColor)\n            }\n\n            materials.push(new THREE.MeshPhongMaterial(Object.assign({}, this.materialOptions, { map: texture })))\n        }\n        return materials\n    }\n\n    getObject () {\n        return this.object\n    }\n\n    create () {\n        if (!DiceManager.world) throw new Error('You must call DiceManager.setWorld(world) first.')\n        this.object = new THREE.Mesh(this.getGeometry(), this.getMaterials())\n\n        this.object.reveiceShadow = true\n        this.object.castShadow = true\n        this.object.diceObject = this\n        this.object.body = new CANNON.Body({\n            mass: this.mass,\n            shape: this.object.geometry.cannon_shape,\n            material: DiceManager.diceBodyMaterial\n        })\n        this.object.body.linearDamping = 0.1\n        this.object.body.angularDamping = 0.1\n        DiceManager.world.add(this.object.body)\n\n        return this.object\n    }\n\n    updateMeshFromBody () {\n        if (!this.simulationRunning) {\n            this.object.position.copy(this.object.body.position)\n            this.object.quaternion.copy(this.object.body.quaternion)\n        }\n    }\n\n    updateBodyFromMesh () {\n        this.object.body.position.copy(this.object.position)\n        this.object.body.quaternion.copy(this.object.quaternion)\n    }\n\n    setMeshFrom (object) {\n        this.object.position.copy(object.position)\n        this.object.quaternion.copy(object.quaternion)\n    }\n\n    shiftUpperValueCustom (diceValue) { return null }\n}\n\nexport class DiceD4 extends DiceObject {\n    constructor (options) {\n        super(options)\n\n        this.tab = -0.1\n        this.af = Math.PI * 7 / 6\n        this.chamfer = 0.96\n        this.vertices = [[1, 1, 1], [-1, -1, 1], [-1, 1, -1], [1, -1, -1]]\n        this.faces = [[1, 0, 2, 1], [0, 1, 3, 2], [0, 3, 2, 3], [1, 2, 3, 4]]\n        this.faceTexts = [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]]\n        this.scaleFactor = 1.2\n        this.values = 4\n        // [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]]  original\n        this.d4FaceTexts = [\n            [\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]], // 1 - 1\n                [[], [0, 0, 0], [1, 4, 3], [2, 3, 4], [1, 2, 4], [2, 1, 3]], // 1 - 2\n                [[], [0, 0, 0], [2, 4, 1], [3, 1, 4], [2, 3, 4], [3, 2, 1]], // 1 - 3\n                [[], [0, 0, 0], [2, 1, 3], [4, 3, 1], [2, 4, 1], [4, 2, 3]]// 1 - 4\n            ],\n            [\n                [[], [0, 0, 0], [1, 4, 3], [2, 3, 4], [1, 2, 4], [2, 1, 3]], // 2 - 1\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]], // 2 - 2\n                [[], [0, 0, 0], [3, 4, 2], [1, 2, 4], [3, 1, 4], [1, 3, 2]], // 2 - 3\n                [[], [0, 0, 0], [4, 2, 3], [1, 3, 2], [4, 1, 2], [1, 4, 3]]// 2 - 4\n            ],\n            [\n                [[], [0, 0, 0], [2, 4, 1], [3, 1, 4], [2, 3, 4], [3, 2, 1]], // 3 - 1\n                [[], [0, 0, 0], [3, 4, 2], [1, 2, 4], [3, 1, 4], [1, 3, 2]], // 3 - 2\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]], // 3 - 3\n                [[], [0, 0, 0], [2, 3, 4], [1, 4, 3], [2, 1, 3], [1, 2, 4]]// 3 - 4\n            ],\n            [\n                [[], [0, 0, 0], [2, 1, 3], [4, 3, 1], [2, 4, 1], [4, 2, 3]], // 4 - 1\n                [[], [0, 0, 0], [4, 2, 3], [1, 3, 2], [4, 1, 2], [1, 4, 3]], // 4 - 2\n                [[], [0, 0, 0], [2, 3, 4], [1, 4, 3], [2, 1, 3], [1, 2, 4]], // 4 - 3\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]]// 4 - 4\n            ]\n        ]\n        // this.faceTexts = this.d4FaceTexts[0];\n        // this.updateMaterialsForValue = (diceValue) => {\n        //     if (diceValue < 0) diceValue += 4;\n        //     this.faceTexts = this.d4FaceTexts[diceValue];\n        //     this.object.material = this.getMaterials();\n        // };\n\n        this.shiftUpperValueCustom = (diceValueNew) => {\n            // let geometry = this.object.geometry.clone()\n            const geometry = this.object.geometry\n            const fromValue = this.getUpsideValue()\n            this.faceTexts = this.d4FaceTexts[fromValue - 1][diceValueNew - 1]\n            this.object.material = this.getMaterials()\n            // this.updateMaterialsForValue(diceValueNew - fromValue);\n            return geometry\n        }\n\n        this.customTextTextureFunction = function (text, color, backColor) {\n            const canvas = document.createElement('canvas')\n            const context = canvas.getContext('2d')\n            const ts = this.calculateTextureSize(this.size / 2 + this.size * 2) * 2\n            canvas.width = canvas.height = ts\n            context.font = ts / 5 + 'pt Arial'\n            context.fillStyle = backColor\n            context.fillRect(0, 0, canvas.width, canvas.height)\n            context.textAlign = 'center'\n            context.textBaseline = 'middle'\n            context.fillStyle = color\n            for (const i in text) {\n                context.fillText(text[i], canvas.width / 2,\n                    canvas.height / 2 - ts * 0.3)\n                context.translate(canvas.width / 2, canvas.height / 2)\n                context.rotate(Math.PI * 2 / 3)\n                context.translate(-canvas.width / 2, -canvas.height / 2)\n            }\n            const texture = new THREE.Texture(canvas)\n            texture.needsUpdate = true\n            return texture\n        }\n        this.mass = 300\n        this.inertia = 5\n        this.invertUpside = true\n\n        this.create()\n    }\n}\n\nexport class DiceD6 extends DiceObject {\n    constructor (options) {\n        super(options)\n\n        this.tab = 0.1\n        this.af = Math.PI / 4\n        this.chamfer = 0.96\n        this.vertices = [[-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],\n        [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1]]\n        this.faces = [[0, 3, 2, 1, 1], [1, 2, 6, 5, 2], [0, 1, 5, 4, 3],\n        [3, 7, 6, 2, 4], [0, 4, 7, 3, 5], [4, 5, 6, 7, 6]]\n        this.scaleFactor = 0.9\n        this.values = 6\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', '6', '7', '8',\n            '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n        this.textMargin = 1.0\n        this.mass = 300\n        this.inertia = 13\n\n        this.create()\n    }\n}\n\nexport class DiceD8 extends DiceObject {\n    constructor (options) {\n        super(options)\n\n        this.tab = 0\n        this.af = -Math.PI / 4 / 2\n        this.chamfer = 0.965\n        this.vertices = [[1, 0, 0], [-1, 0, 0], [0, 1, 0], [0, -1, 0], [0, 0, 1], [0, 0, -1]]\n        this.faces = [[0, 2, 4, 1], [0, 4, 3, 2], [0, 3, 5, 3], [0, 5, 2, 4], [1, 3, 4, 5],\n        [1, 4, 2, 6], [1, 2, 5, 7], [1, 5, 3, 8]]\n        this.scaleFactor = 1\n        this.values = 8\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', '6', '7', '8',\n            '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n        this.textMargin = 1.2\n        this.mass = 340\n        this.inertia = 10\n\n        this.create()\n    }\n}\n\nexport class DiceD10 extends DiceObject {\n    constructor (options) {\n        super(options)\n\n        this.tab = 0\n        this.af = Math.PI * 6 / 5\n        this.chamfer = 0.945\n        this.vertices = []\n        this.faces = [[5, 7, 11, 0], [4, 2, 10, 1], [1, 3, 11, 2], [0, 8, 10, 3], [7, 9, 11, 4],\n        [8, 6, 10, 5], [9, 1, 11, 6], [2, 0, 10, 7], [3, 5, 11, 8], [6, 4, 10, 9],\n        [1, 0, 2, -1], [1, 2, 3, -1], [3, 2, 4, -1], [3, 4, 5, -1], [5, 4, 6, -1],\n        [5, 6, 7, -1], [7, 6, 8, -1], [7, 8, 9, -1], [9, 8, 0, -1], [9, 0, 1, -1]]\n\n        for (let i = 0, b = 0; i < 10; ++i, b += Math.PI * 2 / 10) {\n            this.vertices.push([Math.cos(b), Math.sin(b), 0.105 * (i % 2 ? 1 : -1)])\n        }\n        this.vertices.push([0, 0, -1])\n        this.vertices.push([0, 0, 1])\n\n        this.scaleFactor = 0.9\n        this.values = 10\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', ' 6.', '7', '8',\n            ' 9.', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n        this.textMargin = 1.0\n        this.mass = 350\n        this.inertia = 9\n\n        this.create()\n    }\n}\n\nexport class DiceD12 extends DiceObject {\n    constructor (options) {\n        super(options)\n\n        const p = (1 + Math.sqrt(5)) / 2\n        const q = 1 / p\n\n        this.tab = 0.2\n        this.af = -Math.PI / 4 / 2\n        this.chamfer = 0.968\n        this.vertices = [[0, q, p], [0, q, -p], [0, -q, p], [0, -q, -p], [p, 0, q],\n        [p, 0, -q], [-p, 0, q], [-p, 0, -q], [q, p, 0], [q, -p, 0], [-q, p, 0],\n        [-q, -p, 0], [1, 1, 1], [1, 1, -1], [1, -1, 1], [1, -1, -1], [-1, 1, 1],\n        [-1, 1, -1], [-1, -1, 1], [-1, -1, -1]]\n        this.faces = [[2, 14, 4, 12, 0, 1], [15, 9, 11, 19, 3, 2], [16, 10, 17, 7, 6, 3], [6, 7, 19, 11, 18, 4],\n        [6, 18, 2, 0, 16, 5], [18, 11, 9, 14, 2, 6], [1, 17, 10, 8, 13, 7], [1, 13, 5, 15, 3, 8],\n        [13, 8, 12, 4, 5, 9], [5, 4, 14, 9, 15, 10], [0, 12, 8, 10, 16, 11], [3, 19, 7, 17, 1, 12]]\n        this.scaleFactor = 0.9\n        this.values = 12\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', ' 6.', '7', '8',\n            ' 9.', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n        this.textMargin = 1.0\n        this.mass = 350\n        this.inertia = 8\n\n        this.create()\n    }\n}\n\nexport class DiceD20 extends DiceObject {\n    constructor (options) {\n        super(options)\n\n        const t = (1 + Math.sqrt(5)) / 2\n\n        this.tab = -0.2\n        this.af = -Math.PI / 4 / 2\n        this.chamfer = 0.955\n        this.vertices = [[-1, t, 0], [1, t, 0], [-1, -t, 0], [1, -t, 0],\n        [0, -1, t], [0, 1, t], [0, -1, -t], [0, 1, -t],\n        [t, 0, -1], [t, 0, 1], [-t, 0, -1], [-t, 0, 1]]\n        this.faces = [[0, 11, 5, 1], [0, 5, 1, 2], [0, 1, 7, 3], [0, 7, 10, 4], [0, 10, 11, 5],\n        [1, 5, 9, 6], [5, 11, 4, 7], [11, 10, 2, 8], [10, 7, 6, 9], [7, 1, 8, 10],\n        [3, 9, 4, 11], [3, 4, 2, 12], [3, 2, 6, 13], [3, 6, 8, 14], [3, 8, 9, 15],\n        [4, 9, 5, 16], [2, 4, 11, 17], [6, 2, 10, 18], [8, 6, 7, 19], [9, 8, 1, 20]]\n        this.scaleFactor = 1\n        this.values = 20\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', ' 6.', '7', '8',\n            ' 9.', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n        this.textMargin = 1.0\n        this.mass = 400\n        this.inertia = 6\n\n        this.create()\n    }\n}\n\n// ---------------------------------------------//\n\nexport const DiceManager = new DiceManagerClass()\n\nif (typeof define === 'function' && define.amd) {\n    define(function () {\n        return {\n            DiceManager: DiceManager,\n            DiceD4: DiceD4,\n            DiceD6: DiceD6,\n            DiceD8: DiceD8,\n            DiceD10: DiceD10,\n            DiceD12: DiceD12,\n            DiceD20: DiceD20\n        }\n    })\n} else if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = {\n        DiceManager: DiceManager,\n        DiceD4: DiceD4,\n        DiceD6: DiceD6,\n        DiceD8: DiceD8,\n        DiceD10: DiceD10,\n        DiceD12: DiceD12,\n        DiceD20: DiceD20\n    }\n} else {\n    window.Dice = {\n        DiceManager: DiceManager,\n        DiceD4: DiceD4,\n        DiceD6: DiceD6,\n        DiceD8: DiceD8,\n        DiceD10: DiceD10,\n        DiceD12: DiceD12,\n        DiceD20: DiceD20\n    }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".animation[data-v-00a32712] {\\n  width: 100%;\\n  max-width: 1200px;\\n  height: 350px;\\n}\\n.animation[data-v-00a32712] canvas {\\n  width: 100% !important;\\n  height: auto !important;\\n}\\n.message-container[data-v-00a32712] {\\n  position: relative;\\n  height: 0;\\n  z-index: 2;\\n}\\n.message-container .message[data-v-00a32712] {\\n  position: absolute;\\n  top: 5px;\\n  left: 50%;\\n  transform: translateX(-50%);\\n}\", \"\"]);\n\n// exports\n","module.exports = __webpack_public_path__ + \"audio/dice-3d/roll2.wav\";","module.exports = __webpack_public_path__ + \"audio/dice-3d/roll1.wav\";","<script>\nimport { route } from '~/plugins/route'\n\nexport default {\n  computed: {\n    gamePackageId () {\n      return this.$route.params.game\n    },\n    provablyFairGame () {\n      return this.$store.getters['provably-fair/get'](this.gamePackageId) || {}\n    }\n  },\n\n  methods: {\n    getRoute (action) {\n      return route(`games.${this.gamePackageId}.${action}`)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import store from '~/store'\n\nexport function route (name) {\n  return store.getters['route/get'](name)\n}\n","var render, staticRenderFns\nimport script from \"./Game.vue?vue&type=script&lang=js&\"\nexport * from \"./Game.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"audio/common/click.wav\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column fill-height py-3\"},[_c('div',{staticClass:\"message-container\"},[_c('game-message',{staticClass:\"message\",attrs:{\"message\":_vm.message}})],1),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-center fill-height align-center\"},[_c('div',{ref:\"ThreeJS\",staticClass:\"animation\",attrs:{\"click\":_vm.play}})]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-center flex-column\"},[_c('v-slider',{staticClass:\"px-5\",attrs:{\"thumb-label\":\"always\",\"min\":_vm.minRefNumber,\"max\":_vm.maxRefNumber,\"step\":1,\"track-color\":_vm.sliderTrackColor,\"track-fill-color\":_vm.sliderFillColor},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('v-icon',{on:{\"click\":_vm.decrementRefNumber}},[_vm._v(\"\\n          mdi-minus\\n        \")])]},proxy:true},{key:\"append\",fn:function(){return [_c('v-icon',{on:{\"click\":_vm.incrementRefNumber}},[_vm._v(\"\\n          mdi-plus\\n        \")])]},proxy:true}]),model:{value:(_vm.refNumber),callback:function ($$v) {_vm.refNumber=$$v},expression:\"refNumber\"}}),_vm._v(\" \"),_c('div',{staticClass:\"align-self-center\"},[_c('v-form',{staticClass:\"d-md-flex\",model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center flex-grow-0 mr-0 mr-lg-2\",attrs:{\"value\":_vm.winChance,\"dense\":\"\",\"outlined\":\"\",\"full-width\":false,\"label\":_vm.$t('Win chance'),\"disabled\":true}})],1),_vm._v(\" \"),_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center flex-grow-0 ml-0 ml-lg-2\",attrs:{\"value\":_vm.payout,\"dense\":\"\",\"outlined\":\"\",\"full-width\":false,\"label\":_vm.$t('Payout'),\"disabled\":true}})],1)],1)],1),_vm._v(\" \"),_c('v-btn-toggle',{staticClass:\"align-self-center mb-3\",attrs:{\"active-class\":\"primary--text\",\"mandatory\":\"\",\"rounded\":\"\",\"group\":\"\"},model:{value:(_vm.direction),callback:function ($$v) {_vm.direction=$$v},expression:\"direction\"}},[_c('v-btn',{staticClass:\"mx-1\",attrs:{\"disabled\":_vm.playing,\"small\":\"\",\"value\":-1},on:{\"click\":function($event){return _vm.sound(_vm.clickSound)}}},[_vm._v(\"\\n        \"+_vm._s(_vm.rollLessText)+\"\\n      \")]),_vm._v(\" \"),_c('v-btn',{staticClass:\"mx-1\",attrs:{\"disabled\":_vm.playing,\"small\":\"\",\"value\":1},on:{\"click\":function($event){return _vm.sound(_vm.clickSound)}}},[_vm._v(\"\\n        \"+_vm._s(_vm.rollGreaterText)+\"\\n      \")])],1)],1),_vm._v(\" \"),_c('play-controls',{attrs:{\"loading\":_vm.loading,\"playing\":_vm.playing,\"disabled\":!_vm.formIsValid},on:{\"bet-change\":function($event){_vm.bet = $event},\"play\":_vm.play}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-flex flex-column fill-height py-3\">\n    <div class=\"message-container\">\n      <game-message class=\"message\" :message=\"message\" />\n    </div>\n    <div class=\"d-flex justify-center fill-height align-center\">\n      <div ref=\"ThreeJS\" class=\"animation\" :click=\"play\" />\n    </div>\n    <div class=\"d-flex justify-center flex-column\">\n      <v-slider\n        v-model=\"refNumber\"\n        thumb-label=\"always\"\n        :min=\"minRefNumber\"\n        :max=\"maxRefNumber\"\n        :step=\"1\"\n        :track-color=\"sliderTrackColor\"\n        :track-fill-color=\"sliderFillColor\"\n        class=\"px-5\"\n      >\n        <template v-slot:prepend>\n          <v-icon @click=\"decrementRefNumber\">\n            mdi-minus\n          </v-icon>\n        </template>\n        <template v-slot:append>\n          <v-icon @click=\"incrementRefNumber\">\n            mdi-plus\n          </v-icon>\n        </template>\n      </v-slider>\n      <div class=\"align-self-center\">\n        <v-form v-model=\"formIsValid\" class=\"d-md-flex\">\n          <v-col cols=\"12\" md=\"6\" class=\"pa-0\">\n            <v-text-field\n              :value=\"winChance\"\n              dense\n              outlined\n              :full-width=\"false\"\n              class=\"text-center flex-grow-0 mr-0 mr-lg-2\"\n              :label=\"$t('Win chance')\"\n              :disabled=\"true\"\n            />\n          </v-col>\n          <v-col cols=\"12\" md=\"6\" class=\"pa-0\">\n            <v-text-field\n              :value=\"payout\"\n              dense\n              outlined\n              :full-width=\"false\"\n              class=\"text-center flex-grow-0 ml-0 ml-lg-2\"\n              :label=\"$t('Payout')\"\n              :disabled=\"true\"\n            />\n          </v-col>\n        </v-form>\n      </div>\n      <v-btn-toggle\n        v-model=\"direction\"\n        active-class=\"primary--text\"\n        mandatory\n        rounded\n        group\n        class=\"align-self-center mb-3\"\n      >\n        <v-btn\n          :disabled=\"playing\"\n          class=\"mx-1\"\n          small\n          :value=\"-1\"\n          @click=\"sound(clickSound)\"\n        >\n          {{ rollLessText }}\n        </v-btn>\n        <v-btn\n          :disabled=\"playing\"\n          class=\"mx-1\"\n          small\n          :value=\"1\"\n          @click=\"sound(clickSound)\"\n        >\n          {{ rollGreaterText }}\n        </v-btn>\n      </v-btn-toggle>\n    </div>\n    <play-controls :loading=\"loading\" :playing=\"playing\" :disabled=\"!formIsValid\" @bet-change=\"bet = $event\" @play=\"play\" />\n  </div>\n</template>\n\n<script>\nimport * as CANNON from 'cannon'\nimport * as THREE from 'three'\nimport { DiceD4, DiceD6, DiceD8, DiceD10, DiceD12, DiceD20, DiceManager } from 'packages/dice-3d/resources/js/components/dice.js'\nimport axios from 'axios'\nimport { mapState, mapActions } from 'vuex'\nimport { config } from '~/plugins/config'\nimport FormMixin from '~/mixins/Form'\nimport GameMixin from '~/mixins/Game'\nimport SoundMixin from '~/mixins/Sound'\nimport { round } from '~/plugins/utils'\nimport clickSound from '~/../audio/common/click.wav'\nimport winSound from 'packages/dice-3d/resources/audio/win.wav'\nimport roll1Sound from 'packages/dice-3d/resources/audio/roll1.wav'\nimport roll2Sound from 'packages/dice-3d/resources/audio/roll2.wav'\nimport loseSound from 'packages/dice-3d/resources/audio/lose.wav'\nimport PlayControls from '~/components/Games/PlayControls'\nimport GameMessage from '~/components/Games/GameMessage'\n\nexport default {\n  name: 'Dice3D',\n\n  components: { GameMessage, PlayControls },\n\n  mixins: [FormMixin, GameMixin, SoundMixin],\n\n  data () {\n    return {\n      clickSound,\n      roll1Sound,\n      roll2Sound,\n      formIsValid: true,\n      loading: false,\n      playing: false,\n      refNumber: null,\n      direction: -1,\n      diceFillColor: config('dice-3d.fill_color'),\n      diceFontColor: config('dice-3d.font_color'),\n      bet: parseInt(config('dice-3d.default_bet_amount'), 10),\n      roll: 0,\n      message: null,\n      animation: {}\n    }\n  },\n\n  computed: {\n    ...mapState('auth', ['account']),\n    dices () {\n      return config('dice-3d.dice')\n    },\n    minRoll () {\n      return config('dice-3d.dice').length\n    },\n    maxRoll () {\n      return config('dice-3d.dice').reduce((a, id) => { a += config('dice-3d.dice_types')[id].max; return a }, 0)\n    },\n    rollsRangeLength () {\n      return this.maxRoll - this.minRoll + 1\n    },\n    minRefNumber () {\n      return this.minRoll + 1\n    },\n    maxRefNumber () {\n      return this.maxRoll\n    },\n    houseEdge () {\n      return config('dice-3d.house_edge')\n    },\n    winChance () {\n      const winChance = this.direction === -1\n        ? (this.refNumber - this.minRoll) / this.rollsRangeLength * 100\n        : (this.maxRoll - this.refNumber + 1) / this.rollsRangeLength * 100\n\n      return round(winChance, 2)\n    },\n    payout () {\n      const payout = (100 - this.houseEdge) / this.winChance\n      return round(payout, 4)\n    },\n    rollLessText () {\n      return this.minRoll < this.refNumber - 1\n        ? this.$t('Roll {0} - {1}', [this.minRoll, this.refNumber - 1])\n        : this.$t('Roll {0}', [this.refNumber - 1])\n    },\n    rollGreaterText () {\n      return this.maxRoll > this.refNumber\n        ? this.$t('Roll {0} - {1}', [this.refNumber, this.maxRoll])\n        : this.$t('Roll {0}', [this.refNumber])\n    },\n    sliderTrackColor () {\n      return this.direction === -1 ? 'grey' : 'primary'\n    },\n    sliderFillColor () {\n      return this.direction === -1 ? 'primary' : 'grey'\n    }\n  },\n\n  created () {\n    // trigger change\n    this.refNumber = this.minRoll + Math.floor((this.maxRoll - this.minRoll) / 2)\n  },\n  mounted () {\n    window.dice = this\n    this.animation = {\n      pos: null,\n      velocity: null,\n      container: null,\n      scene: null,\n      camera: null,\n      renderer: null,\n      world: null,\n      floorWidth: 0,\n      floorHeight: 0,\n      width: this.$refs.ThreeJS.offsetWidth,\n      height: this.$refs.ThreeJS.offsetHeight,\n      aspect: this.$refs.ThreeJS.offsetWidth / this.$refs.ThreeJS.offsetHeight,\n      camera_angle: 10,\n      camera_position: 100,\n      near: 0.01,\n      far: 10000,\n      diceValues: [],\n      diceAnimationStep: 0,\n      isThrought: false,\n      dice: [],\n      animate: () => {\n        var i\n        if (this.animation.isThrought) {\n          for (i in this.animation.dice) {\n            if (this.animation.diceValues[i].steps.length > this.animation.diceAnimationStep) this.animation.dice[i].setMeshFrom(this.animation.diceValues[i].steps[this.animation.diceAnimationStep])\n            if (this.animation.diceValues[i].sound.length > this.animation.diceAnimationStep && this.animation.diceValues[i].sound[this.animation.diceAnimationStep] && this.animation.diceValues[i].lastSound < this.animation.diceAnimationStep) {\n              if (this.animation.diceValues[i].lastSound === 0) this.sound(this.roll1Sound)\n              else this.sound(this.roll2Sound)\n              this.animation.diceValues[i].lastSound = this.animation.diceAnimationStep + 5\n            }\n          }\n          this.animation.diceAnimationStep++\n        }\n        this.animation.renderer.render(this.animation.scene, this.animation.camera)\n        requestAnimationFrame(this.animation.animate)\n        if (this.animation.isThrought) {\n          var isFinished = true\n          for (i = 0; i < this.animation.dice.length; i++) isFinished = isFinished && !(this.animation.diceValues[i].steps.length > this.animation.diceAnimationStep)\n          if (isFinished) {\n            this.playing = false\n            this.updateUserAccountBalance(this.animation.result.balance)\n            if (this.animation.result.win > 0) {\n              this.sound(winSound)\n              this.message = this.$t('You rolled') + ' ' + this.roll + ' ' + this.$t('and won') + ' ' + this.animation.result.win\n            } else {\n              this.sound(loseSound)\n              this.message = this.$t('You rolled') + ' ' + this.roll\n            }\n            this.animation.isThrought = false\n          }\n        }\n      }\n    }\n    this.animation.scene = new THREE.Scene()\n    this.animation.camera = new THREE.PerspectiveCamera(this.animation.camera_angle, this.animation.aspect, this.animation.near, this.animation.far)\n    this.animation.scene.add(this.animation.camera)\n    this.animation.camera.position.set(0, this.animation.camera_position, 0)\n    this.animation.camera.lookAt(0, 0, 0)\n    this.animation.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })\n    this.animation.renderer.setClearColor(0x000000, 0)\n    this.animation.renderer.setSize(this.animation.width * 2, this.animation.height * 2)\n    this.animation.renderer.shadowMap.enabled = true\n    this.animation.renderer.shadowMap.type = THREE.PCFSoftShadowMap\n    this.animation.container = this.$refs.ThreeJS\n    this.animation.container.appendChild(this.animation.renderer.domElement)\n\n    const ambient = new THREE.AmbientLight('#ffffff', 0.5)\n    this.animation.scene.add(ambient)\n\n    const directionalLight = new THREE.DirectionalLight('#ffffff', 0.2)\n    directionalLight.position.x = -1000\n    directionalLight.position.y = 1000\n    directionalLight.position.z = 1000\n    this.animation.scene.add(directionalLight)\n\n    const light = new THREE.SpotLight(0xefdfd5, 0.5)\n    light.position.y = 200\n    light.target.position.set(0, 0, 0)\n    light.castShadow = true\n    light.shadow.camera.near = 50\n    light.shadow.camera.far = 110\n    light.shadow.mapSize.width = 1024\n    light.shadow.mapSize.height = 1024\n    this.animation.scene.add(light)\n\n    this.animation.floorHeight = 2 * Math.tan(this.animation.camera.fov * Math.PI / 180 / 2) * Math.abs(this.animation.camera.position.y)\n    this.animation.floorWidth = this.animation.floorHeight * this.animation.camera.aspect\n    // var floorMaterial = new THREE.MeshPhongMaterial({ color: '#00aa00', side: THREE.DoubleSide })\n    // var floorGeometry = new THREE.PlaneGeometry(floorWidth * 0.95, floorHeight * 0.95, 10, 10)\n    // var floor = new THREE.Mesh(floorGeometry, floorMaterial)\n    // floor.receiveShadow = true\n    // floor.rotation.x = Math.PI / 2\n    // scene.add(floor)\n    this.animation.world = new CANNON.World()\n    this.animation.world.gravity.set(0, -9.82 * 10, 0)\n    this.animation.world.broadphase = new CANNON.NaiveBroadphase()\n    this.animation.world.solver.iterations = 16\n    DiceManager.setWorld(this.animation.world)\n    // Floor\n    const floorBody = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.floorBodyMaterial })\n    floorBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2)\n    this.animation.world.add(floorBody)\n    // floorBody.addEventListener(\"collide\",() => {\n    //   this.sound(this.clickSound)\n    // })\n    // Walls\n    var barrier\n    const barrierCorner = 0.85\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI)\n    barrier.position.set(0, 0, this.animation.floorHeight * barrierCorner / 2)\n    this.animation.world.add(barrier)\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), 0)\n    barrier.position.set(0, 0, -(this.animation.floorHeight * barrierCorner / 2))\n    this.animation.world.add(barrier)\n    window.barrier = barrier\n    window.CANNON = CANNON\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2)\n    barrier.position.set(this.animation.floorWidth * barrierCorner / 2, 0, 0)\n    this.animation.world.add(barrier)\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), Math.PI / 2)\n    barrier.position.set(-(this.animation.floorWidth * barrierCorner / 2), 0, 0)\n    this.animation.world.add(barrier)\n    // DICE COLORS\n    // const fontColor = this.$vuetify.theme.isDark ? '#ffffff' : '#000000'\n    const fontColor = this.diceFontColor\n    // const backColor = getComputedStyle(document.body).getPropertyValue('--v-primary-base').trim()\n    const backColor = this.diceFillColor\n    // const backColors = ['#ff0000','#00ff00','#0000ff','#777700','#770077','#007777']\n    this.dices.forEach((dice, i) => {\n      var d\n      switch (dice) {\n        case 'tetrahedron':\n          d = new DiceD4({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD4({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'cube':\n          d = new DiceD6({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD6({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'octahedron':\n          d = new DiceD8({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD8({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'dipyramid':\n          d = new DiceD10({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD10({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'dodecahedron':\n          d = new DiceD12({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD12({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'icosahedron':\n          d = new DiceD20({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD20({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n      }\n      this.animation.scene.add(d.getObject())\n      this.animation.dice.push(d)\n    })\n    this.animation.diceThrow = () => {\n      if (this.animation.pos == null) this.animation.randomDiceThrow()\n      const pos = this.animation.pos\n      const velocity = this.animation.velocity\n      this.animation.isThrought = true\n      this.animation.diceAnimationStep = 0\n      this.animation.diceValues = []\n      if (Math.abs(velocity.x) > 100) velocity.x /= (Math.abs(velocity.x) / 100)\n      if (Math.abs(velocity.y) > 100) velocity.y /= (Math.abs(velocity.y) / 100)\n      if (Math.abs(velocity.z) > 100) velocity.z /= (Math.abs(velocity.z) / 100)\n      var i\n      for (i = 0; i < this.animation.dice.length; i++) {\n          this.animation.dice[i].getObject().position.x = pos.x - (i % 3) * 1.5\n          this.animation.dice[i].getObject().position.y = pos.y + Math.floor(i / 3) * 1.5\n          this.animation.dice[i].getObject().position.z = pos.z + (i % 3) * 1.5\n          // this.animation.dice[i].getObject().quaternion.x = (Math.random()*90-45) * Math.PI / 180;\n          // this.animation.dice[i].getObject().quaternion.z = (Math.random()*90-45) * Math.PI / 180;\n          this.animation.dice[i].updateBodyFromMesh()\n          // const yRand = Math.random() * 10\n          // const rand = Math.random() * 1 + 1\n          this.animation.dice[i].getObject().body.velocity.set(\n                          velocity.x,\n                          velocity.y,\n                          velocity.z)\n          this.animation.dice[i].getObject().body.angularVelocity.set(\n                          10 * Math.random() - 10,\n                          10 * Math.random() - 10,\n                          10 * Math.random() - 10)\n\n          this.animation.diceValues.push({ dice: this.animation.dice[i], value: i + 1 })\n      }\n      var roll = this.roll\n      for (i = 0; i < this.animation.diceValues.length; i++) {\n        this.animation.diceValues[i].value = Math.ceil(Math.random() * Math.min(this.animation.diceValues[i].dice.values, (roll - (this.animation.diceValues.length - i - 1))))\n        roll -= this.animation.diceValues[i].value\n      }\n      while (roll > 0) {\n        for (i = 0; i < this.animation.diceValues.length; i++) {\n          if (this.animation.diceValues[i].value < this.animation.diceValues[i].dice.values) {\n            var add = Math.ceil(Math.random() * Math.min(this.animation.diceValues[i].dice.values - this.animation.diceValues[i].value, roll))\n            this.animation.diceValues[i].value += add\n            roll -= add\n            if (roll <= 0) break\n          }\n        }\n      }\n\n      DiceManager.prepareValues(this.animation.diceValues, floorBody)\n      this.animation.pos = null\n      this.animation.velocity = null\n    }\n    const makeRandomVector = (vector) => {\n      var rnd = Math.random()\n      var randomAngle = rnd * Math.PI / 5 - Math.PI / 5 / 2\n      var vec = {\n          x: vector.x * Math.cos(randomAngle) - vector.y * Math.sin(randomAngle),\n          y: vector.x * Math.sin(randomAngle) + vector.y * Math.cos(randomAngle)\n      }\n      if (vec.x === 0) vec.x = 0.01\n      if (vec.y === 0) vec.y = 0.01\n      return vec\n    }\n    this.animation.randomDiceThrow = () => {\n      var rnd = Math.random()\n      var vector = { x: (rnd * 2 - 1) * this.animation.floorWidth, y: -(rnd * 2 - 1) * this.animation.floorHeight }\n      var dist = Math.sqrt(vector.x * vector.x + vector.y * vector.y)\n      var boost = dist * 0.1 // (rnd ) * dist*0.05;\n\n      var vec = makeRandomVector(vector)\n      var pos = {\n          x: this.animation.floorWidth / 2 * (vec.x > 0 ? -1 : 1) * 0.9,\n          y: 10,\n          z: this.animation.floorHeight / 2 * (vec.y > 0 ? -1 : 1) * 0.9\n      }\n      var projector = Math.abs(vec.x / vec.y)\n      if (projector > 1.0) pos.z /= projector; else pos.x *= projector\n      var velvec = makeRandomVector(vector)\n      var velocity = { x: velvec.x * boost, y: -0.01, z: velvec.y * boost }\n      this.animation.pos = pos\n      this.animation.velocity = velocity\n    }\n    const getMouseCoords = ev => {\n      var touches = ev.changedTouches\n      if (touches) return { x: touches[0].clientX, y: touches[0].clientY }\n      return { x: ev.clientX, y: ev.clientY }\n    }\n    const mouseStart = ev => {\n      ev.preventDefault()\n      if (this.playing) return\n      this.animation.mouse_time = (new Date()).getTime()\n      this.animation.mouse_start = getMouseCoords(ev)\n    }\n    const mouseEnd = ev => {\n      if (this.animation.mouse_start === undefined) return\n      ev.stopPropagation()\n      var m = getMouseCoords(ev)\n      var vector = { x: m.x - this.animation.mouse_start.x, y: (m.y - this.animation.mouse_start.y) }\n      this.animation.mouse_start = undefined\n      var dist = Math.sqrt(vector.x * vector.x + vector.y * vector.y)\n      if (dist < Math.sqrt(this.animation.floorWidth * this.animation.floorHeight * 0.01)) return\n      var timeInt = (new Date()).getTime() - this.animation.mouse_time\n      if (timeInt > 2000) timeInt = 2000\n      var boost = Math.sqrt((2500 - timeInt) / 2500) * dist * 0.001\n\n      // var rnd = Math.random()\n      var vec = makeRandomVector(vector)\n      var pos = {\n          x: this.animation.floorWidth / 2 * (vec.x > 0 ? -1 : 1) * 0.9,\n          y: 10,\n          z: this.animation.floorHeight / 2 * (vec.y > 0 ? -1 : 1) * 0.9\n      }\n      var projector = Math.abs(vec.x / vec.y)\n      if (projector > 1.0) pos.z /= projector; else pos.x *= projector\n      var velvec = makeRandomVector(vector)\n      var velocity = { x: velvec.x * boost, y: -0.01, z: velvec.y * boost }\n      this.animation.pos = pos\n      this.animation.velocity = velocity\n      this.play(this.bet)\n      // this.animation.diceThrow(pos,velocity)\n    }\n    this.animation.renderer.domElement.addEventListener('mousedown', mouseStart)\n    this.animation.renderer.domElement.addEventListener('mouseup', mouseEnd)\n    this.animation.renderer.domElement.addEventListener('touchstart', mouseStart)\n    this.animation.renderer.domElement.addEventListener('touchend', mouseEnd)\n    this.animation.world.step(1.0 / 60.0)\n    requestAnimationFrame(this.animation.animate)\n    this.animation.start = () => {\n      this.animation.diceValues = []\n      for (var i = 0; i < this.animation.dice.length; i++) {\n        this.animation.dice[i].getObject().position.x = (i % 3) * 1.7\n        this.animation.dice[i].getObject().position.y = 15 + Math.floor(i / 3) * 1.7\n        this.animation.dice[i].getObject().position.z = (i % 3) * 1.7\n        this.animation.dice[i].getObject().quaternion.x = 0\n        this.animation.dice[i].getObject().quaternion.y = 0\n        this.animation.dice[i].getObject().quaternion.z = 0\n        this.animation.dice[i].updateBodyFromMesh()\n        this.animation.dice[i].getObject().body.velocity.set(0, 10, 0)\n        this.animation.dice[i].getObject().body.angularVelocity.set(0, 5, 0)\n        this.animation.diceValues.push({ dice: this.animation.dice[i], value: i + 1 })\n      }\n      DiceManager.prepareValues(this.animation.diceValues, floorBody)\n      this.animation.dice.forEach(dice => dice.updateMeshFromBody())\n      // if(is_prep)\n    }\n    this.animation.start()\n  },\n  beforeDestroy () {\n    this.animation.animate = () => {}\n  },\n  methods: {\n    ...mapActions({\n      updateUserAccountBalance: 'auth/updateUserAccountBalance',\n      setProvablyFairGame: 'provably-fair/set'\n    }),\n    async play (bet) {\n      this.loading = true\n      this.playing = true\n      this.message = null\n      // update user balance\n      this.updateUserAccountBalance(this.account.balance - bet)\n      // API request params\n      const endpoint = this.getRoute('play')\n      const requestParams = { hash: this.provablyFairGame.hash, bet, direction: this.direction, ref_number: this.refNumber }\n      // execute the action\n      const { data: game } = await axios.post(endpoint, requestParams)\n      this.loading = false\n      this.roll = game.gameable.roll\n      this.setProvablyFairGame({ key: this.gamePackageId, game: game.pf_game })\n\n      this.animation.result = {\n        balance: game.account.balance,\n        win: game.win\n      }\n      this.animation.diceThrow()\n    },\n    decrementRefNumber () {\n      this.refNumber = Math.max(this.minRefNumber, --this.refNumber)\n    },\n    incrementRefNumber () {\n      this.refNumber = Math.min(this.maxRefNumber, ++this.refNumber)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .animation {\n    width:100%;\n    max-width:1200px;\n    height:350px;\n    &::v-deep canvas {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n  .message-container {\n    position:relative;\n    height:0;\n    z-index:2;\n    .message {\n      position:absolute;\n      top:5px;\n      left:50%;\n      transform: translateX(-50%);\n    }\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=00a32712&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=js&\"\nexport * from \"./game.vue?vue&type=script&lang=js&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&id=00a32712&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00a32712\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VBtnToggle,VCol,VForm,VIcon,VSlider,VTextField})\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&id=00a32712&lang=scss&scoped=true&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&id=00a32712&lang=scss&scoped=true&\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&id=00a32712&lang=scss&scoped=true&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import mod from \"-!../../../../../node_modules/style-loader/index.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&id=00a32712&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/style-loader/index.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--11-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&id=00a32712&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"audio/dice-3d/lose.wav\";","module.exports = __webpack_public_path__ + \"audio/dice-3d/win.wav\";"],"sourceRoot":""}