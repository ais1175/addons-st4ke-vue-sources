(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{"58ll":function(n,a,i){var t=i("kFim");"string"==typeof t&&(t=[[n.i,t,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(t,o);t.locals&&(n.exports=t.locals)},BTiq:function(n,a,i){n.exports=i.p+"audio/heads-or-tails/lose.wav"},DPOf:function(n,a,i){"use strict";var t=i("58ll");i.n(t).a},FTVn:function(n,a,i){n.exports=i.p+"audio/heads-or-tails/hit1.wav"},OY7U:function(n,a,i){"use strict";var t=i("g6NE");var o={computed:{gamePackageId:function(){return this.$route.params.game},provablyFairGame:function(){return this.$store.getters["provably-fair/get"](this.gamePackageId)||{}}},methods:{getRoute:function(n){return a="games.".concat(this.gamePackageId,".").concat(n),t.a.getters["route/get"](a);var a}}},e=i("KHd+"),s=Object(e.a)(o,void 0,void 0,!1,null,null,null);a.a=s.exports},VA6O:function(n,a,i){n.exports=i.p+"audio/common/click.wav"},Vkua:function(n,a,i){n.exports=i.p+"audio/heads-or-tails/win.wav"},YPDI:function(n,a,i){"use strict";i.r(a);var t=i("o0o1"),o=i.n(t),e=i("9ZTT"),s=i("Womt"),r=i("vDqi"),m=i.n(r),c=i("L2JU"),l=i("fpkf"),h=(i("/rcJ"),i("C3Ci")),d=i("OY7U"),u=i("fYW3"),p=i("ZXch"),f=i("VA6O"),g=i.n(f),w=i("Vkua"),y=i.n(w),b=i("BTiq"),_=i.n(b),v=i("FTVn"),x=i.n(v),M=i("hFsa"),P=i.n(M),O=i("/hoC");function B(n,a,i,t,o,e,s){try{var r=n[e](s),m=r.value}catch(n){return void i(n)}r.done?a(m):Promise.resolve(m).then(t,o)}function S(n){return function(){var a=this,i=arguments;return new Promise((function(t,o){var e=n.apply(a,i);function s(n){B(e,t,o,s,r,"next",n)}function r(n){B(e,t,o,s,r,"throw",n)}s(void 0)}))}}function I(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.push.apply(i,t)}return i}function j(n){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?I(Object(i),!0).forEach((function(a){A(n,a,i[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))}))}return n}function A(n,a,i){return a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}var k,C,q={name:"HeadsOrTails",components:{GameMessage:i("7n2z").a,PlayControls:O.a},mixins:[h.a,d.a,u.a],data:function(){return{clickSound:g.a,winSound:y.a,loseSound:_.a,hit1Sound:x.a,hit2Sound:P.a,formIsValid:!0,loading:!1,playing:!1,is_ready:!1,tossBet:0,tossResult:null,result:null,message:null,animation:{}}},computed:j({},Object(c.d)("auth",["account"]),{houseEdge:function(){return Object(l.a)("heads-or-tails.house_edge")},headsImageUrl:function(){return Object(l.a)("heads-or-tails.images.heads")},tailsImageUrl:function(){return Object(l.a)("heads-or-tails.images.tails")},edgeImageUrl:function(){return Object(l.a)("heads-or-tails.images.edge")},cameraAngle:function(){return Object(l.a)("heads-or-tails.animation.camera_angle")},cameraPosition:function(){return Object(l.a)("heads-or-tails.animation.camera_position")},throwHeight:function(){return Object(l.a)("heads-or-tails.animation.throw_height")}}),mounted:(C=S(o.a.mark((function n(){var a,i,t,r,m,c,l,h,d,u,p,f=this;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return window.hot=this,this.animation={pos:null,velocity:null,container:null,scene:null,camera:null,renderer:null,world:null,floorWidth:0,floorHeight:0,width:this.$refs.animation.offsetWidth,height:this.$refs.animation.offsetHeight,aspect:this.$refs.animation.offsetWidth/this.$refs.animation.offsetHeight,camera_angle:this.cameraAngle,camera_position:100,near:.01,far:1e4,animationStep:0,lastSound:0,isAnimation:!1,coin:null,coin_body:null,coin_radius:5,coin_height:.3,coin_top:null,coin_bottom:null,coin_top_texture:null,coin_bottom_texture:null,coin_side_texture:null,result:null,frames:[],animate:function(){f.animation.isThrought&&(f.animation.frames.length>f.animation.animationStep?(f.animation.coin.position.copy(f.animation.frames[f.animation.animationStep].position),f.animation.coin.quaternion.copy(f.animation.frames[f.animation.animationStep].quaternion),f.animation.frames[f.animation.animationStep].is_contact&&f.animation.lastSound<f.animation.animationStep&&(0===f.animation.lastSound?f.sound(f.hit1Sound):f.sound(f.hit2Sound),f.animation.lastSound=f.animation.animationStep+5),f.animation.animationStep++):(f.updateUserAccountBalance(f.result.balance),f.sound(f.result.sound),f.message=f.result.message,f.animation.animationStep=0,f.animation.frames=[],f.animation.lastSound=0,f.animation.isThrought=!1,f.result=null,f.playing=!1)),f.animation.renderer.render(f.animation.scene,f.animation.camera),f.animation.coin.position.copy(f.animation.coin_body.position),f.animation.coin.quaternion.copy(f.animation.coin_body.quaternion),requestAnimationFrame(f.animation.animate)}},this.animation.scene=new s.n,this.animation.camera=new s.m(this.animation.camera_angle,this.animation.aspect,this.animation.near,this.animation.far),this.animation.scene.add(this.animation.camera),this.animation.camera.position.set(0,this.animation.camera_position,100),this.animation.camera.lookAt(0,0,this.cameraPosition),this.animation.renderer=new s.t({antialias:!0,alpha:!0}),this.animation.renderer.setClearColor(0,0),this.animation.renderer.setSize(2*this.animation.width,2*this.animation.height),this.animation.renderer.shadowMap.enabled=!0,this.animation.renderer.shadowMap.type=s.l,this.animation.container=this.$refs.animation,this.animation.container.appendChild(this.animation.renderer.domElement),a=new s.a("#ffffff",.5),this.animation.scene.add(a),(i=new s.d("#ffffff",.5)).position.x=-1e3,i.position.y=1e3,i.position.z=1e3,this.animation.scene.add(i),(t=new s.p(15720405,.75)).position.y=60,t.target.position.set(0,0,0),t.castShadow=!0,t.shadow.camera.near=50,t.shadow.camera.far=210,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.animation.scene.add(t),this.animation.floorHeight=2*Math.tan(this.animation.camera.fov*Math.PI/180/2)*Math.abs(this.animation.camera.position.y),this.animation.floorWidth=this.animation.floorHeight*this.animation.camera.aspect,this.animation.world=new e.World,this.animation.world.gravity.set(0,-98.2,0),this.animation.world.broadphase=new e.NaiveBroadphase,this.animation.world.solver.iterations=16,this.animation.coinBodyMaterial=new e.Material,this.animation.floorBodyMaterial=new e.Material,this.animation.barrierBodyMaterial=new e.Material,this.animation.world.addContactMaterial(new e.ContactMaterial(this.animation.floorBodyMaterial,this.animation.coinBodyMaterial,{friction:.001,restitution:.5})),this.animation.world.addContactMaterial(new e.ContactMaterial(this.animation.barrierBodyMaterial,this.animation.coinBodyMaterial,{friction:.001,restitution:.5})),this.animation.floorBody=new e.Body({mass:0,shape:new e.Plane,material:this.animation.floorBodyMaterial}),this.animation.floorBody.quaternion.setFromAxisAngle(new e.Vec3(1,0,0),-Math.PI/2),this.animation.world.add(this.animation.floorBody),(r=new e.Body({mass:0,shape:new e.Plane,material:this.animation.barrierBodyMaterial})).quaternion.setFromAxisAngle(new e.Vec3(0,1,0),-Math.PI),r.position.set(0,0,.85*this.animation.floorHeight/2-5),this.animation.world.add(r),(r=new e.Body({mass:0,shape:new e.Plane,material:this.animation.barrierBodyMaterial})).quaternion.setFromAxisAngle(new e.Vec3(0,1,0),0),r.position.set(0,0,-.85*this.animation.floorHeight/2-5),this.animation.world.add(r),window.barrier=r,window.CANNON=e,(r=new e.Body({mass:0,shape:new e.Plane,material:this.animation.barrierBodyMaterial})).quaternion.setFromAxisAngle(new e.Vec3(0,1,0),-Math.PI/2),r.position.set(.85*this.animation.floorWidth/2,0,-5),this.animation.world.add(r),(r=new e.Body({mass:0,shape:new e.Plane,material:this.animation.barrierBodyMaterial})).quaternion.setFromAxisAngle(new e.Vec3(0,1,0),Math.PI/2),r.position.set(-.85*this.animation.floorWidth/2,0,-5),this.animation.world.add(r),m=function(n){var a=s.g.floorPowerOfTwo(2*n.width),i=s.g.floorPowerOfTwo(2*n.height),t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=a,t.height=i,t.getContext("2d").drawImage(n,0,0,a,i),t},n.next=66,new Promise((function(n,a){var i=new Image;i.onload=function(){return n(m(i))},i.onerror=a,i.src=f.headsImageUrl}));case 66:return this.animation.coin_top_texture=n.sent,n.next=69,new Promise((function(n,a){var i=new Image;i.onload=function(){return n(m(i))},i.onerror=a,i.src=f.tailsImageUrl}));case 69:return this.animation.coin_bottom_texture=n.sent,n.next=72,new Promise((function(n,a){var i=new Image;i.onload=function(){return n(m(i))},i.onerror=a,i.src=f.edgeImageUrl}));case 72:this.animation.coin_side_texture=n.sent,this.animation.coin=new s.k,c=new s.c(this.animation.coin_radius,this.animation.coin_radius,this.animation.coin_height,100,1,!0),(l=new s.q(this.animation.coin_side_texture)).needsUpdate=!0,h=new s.i({map:l}),d=new s.h(c,h),this.animation.coin.add(d),this.animation.coin_swap=function(n){void 0===n&&(n=!1),null!==f.animation.coin_top&&f.animation.coin.add(f.animation.coin_top);var a=new s.b(f.animation.coin_radius,100),i=new s.q(n?f.animation.coin_bottom_texture:f.animation.coin_top_texture);i.needsUpdate=!0;var t=new s.i({map:i});f.animation.coin_top=new s.h(a,t),f.animation.coin_top.position.y=f.animation.coin_height/2,f.animation.coin_top.rotation.x=-Math.PI/2,f.animation.coin.add(f.animation.coin_top),null!==f.animation.coin_bottom&&f.animation.coin.add(f.animation.coin_bottom);var o=new s.b(f.animation.coin_radius,100),e=new s.q(n?f.animation.coin_top_texture:f.animation.coin_bottom_texture);e.needsUpdate=!0;var r=new s.i({map:e});f.animation.coin_bottom=new s.h(o,r),f.animation.coin_bottom.position.y=-f.animation.coin_height/2,f.animation.coin_bottom.rotation.x=Math.PI/2,f.animation.coin.add(f.animation.coin_bottom)},this.animation.coin_swap(),this.animation.scene.add(this.animation.coin),this.animation.coin_body=new e.Body({mass:600,shape:new e.Cylinder(this.animation.coin_radius,this.animation.coin_radius,this.animation.coin_height,100),material:this.animation.coinBodyMaterial}),this.animation.coin_body.linearDamping=.1,this.animation.coin_body.angularDamping=.1,(u=new e.Quaternion).setFromAxisAngle(new e.Vec3(1,0,0),-Math.PI/2),p=new e.Vec3(0,0,0),this.animation.coin_body.shapes[0].transformAllPoints(p,u),this.animation.throw=function(n){f.animation.coin_body.velocity.set(0,f.throwHeight,0),f.animation.coin_body.angularVelocity.set(25*Math.random()-25,Math.random(),25*Math.random()-25),f.animation.coin_body.position.set(0,10,0),f.animation.frames=[];var a=!1,i=function(){a=!0};f.animation.floorBody.addEventListener("collide",i);for(var t=0;t<10;)f.animation.frames.push({position:f.animation.coin_body.position.clone(),quaternion:f.animation.coin_body.quaternion.clone(),is_contact:a}),a=!1,f.animation.world.step(1/30),f.animation.isFinished()?t++:t=0;f.animation.floorBody.removeEventListener("collide",i);var o=f.animation.getSide();if(o>Math.PI/2*.7&&o<Math.PI/2*1.3)return f.animation.throw(n);f.animation.coin_swap((o<Math.PI/2?1:0)===n),f.animation.isThrought=!0},this.animation.getSide=function(){var n=new s.s(0,1,0),a=new s.s(0,1,0);return a.applyQuaternion(f.animation.coin_body.quaternion),n.angleTo(a)},this.animation.isFinished=function(){var n=f.animation.coin_body.angularVelocity,a=f.animation.coin_body.velocity;return Math.abs(n.x)<.5&&Math.abs(n.y)<.5&&Math.abs(n.z)<.5&&Math.abs(a.x)<.5&&Math.abs(a.y)<.5&&Math.abs(a.z)<.5},this.animation.world.add(this.animation.coin_body),this.animation.animate(),this.is_ready=!0;case 96:case"end":return n.stop()}}),n,this)}))),function(){return C.apply(this,arguments)}),beforeDestroy:function(){this.animation.animate=function(){}},methods:j({},Object(c.b)({updateUserAccountBalance:"auth/updateUserAccountBalance",setProvablyFairGame:"provably-fair/set"}),{play:(k=S(o.a.mark((function n(a){var i,t,e,s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,this.playing=!0,this.message=null,this.updateUserAccountBalance(this.account.balance-a),n.next=6,Object(p.l)(10);case 6:return i=this.getRoute("play"),t={hash:this.provablyFairGame.hash,bet:a,toss_bet:this.tossBet},n.next=10,m.a.post(i,t);case 10:e=n.sent,s=e.data,this.loading=!1,this.result={balance:s.account.balance,win:s.win,message:null,sound:null},s.win>0?(this.result.sound=y.a,this.result.message=s.gameable.result+", "+this.$t("you won")+" "+s.win):(this.result.sound=_.a,this.result.message=s.gameable.result+", "+this.$t("you lost")),this.tossResult=s.gameable.toss_result,this.animation.throw(this.tossResult),this.setProvablyFairGame({key:this.gamePackageId,game:s.pf_game});case 18:case"end":return n.stop()}}),n,this)}))),function(n){return k.apply(this,arguments)})})},F=(i("DPOf"),i("KHd+")),V=i("ZUTo"),T=i.n(V),U=i("gzZi"),H=i("pgmH"),$=Object(F.a)(q,(function(){var n=this,a=n.$createElement,i=n._self._c||a;return i("div",{staticClass:"d-flex flex-column fill-height py-3"},[i("div",{staticClass:"message-container d-flex justify-center align-center"},[i("div",{staticClass:"message"},[i("game-message",{attrs:{message:n.message}})],1)]),n._v(" "),i("div",{staticClass:"d-flex justify-center fill-height align-center"},[i("div",{ref:"animation",staticClass:"animation"})]),n._v(" "),i("div",{staticClass:"d-flex justify-center flex-column"},[i("v-btn-toggle",{staticClass:"align-self-center mb-3",attrs:{"active-class":"primary--text",mandatory:"",rounded:"",group:""},model:{value:n.tossBet,callback:function(a){n.tossBet=a},expression:"tossBet"}},[i("v-btn",{staticClass:"mx-1",attrs:{disabled:n.playing||!n.is_ready,small:"",value:0},on:{click:function(a){return n.sound(n.clickSound)}}},[n._v("\n        "+n._s(n.$t("Heads"))+"\n      ")]),n._v(" "),i("v-btn",{staticClass:"mx-1",attrs:{disabled:n.playing||!n.is_ready,small:"",value:1},on:{click:function(a){return n.sound(n.clickSound)}}},[n._v("\n        "+n._s(n.$t("Tails"))+"\n      ")])],1)],1),n._v(" "),i("play-controls",{attrs:{loading:n.loading,playing:n.playing,disabled:!n.formIsValid||!n.is_ready},on:{play:n.play}})],1)}),[],!1,null,"0836ac5e",null);a.default=$.exports;T()($,{VBtn:U.a,VBtnToggle:H.a})},hFsa:function(n,a,i){n.exports=i.p+"audio/heads-or-tails/hit2.wav"},kFim:function(n,a,i){(n.exports=i("I1BE")(!1)).push([n.i,".animation[data-v-0836ac5e] {\n  width: 100%;\n  max-width: 1200px;\n  height: 350px;\n}\n.animation[data-v-0836ac5e] canvas {\n  width: 100% !important;\n  height: auto !important;\n}\n.message-container[data-v-0836ac5e] {\n  position: relative;\n  height: 0;\n  z-index: 2;\n}\n.message-container .message[data-v-0836ac5e] {\n  position: absolute;\n  top: 5px;\n  left: 50%;\n  transform: translateX(-50%);\n}",""])}}]);
//# sourceMappingURL=heads-or-tails-resources-js-pages-game.js.map