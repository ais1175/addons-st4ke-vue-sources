(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{IWYn:function(t,n,e){"use strict";e.r(n);var i=e("o0o1"),a=e.n(i),r=e("vDqi"),o=e.n(r),c=e("L2JU"),s=e("fpkf"),l=e("/rcJ"),u=e("C3Ci"),m=e("OY7U"),f=e("fYW3"),h=e("ZXch"),d=e("VA6O"),p=e.n(d),b=e("RhOJ"),v=e.n(b),y=e("LswC"),g=e.n(y),x=e("/hoC"),w=e("pc+1"),C={props:{number:{type:Number,required:!0},animating:{type:Boolean,required:!0}},data:function(){return{tweenedValue:0,animationCompleted:!1}},computed:{animatedValue:function(){return this.tweenedValue.toFixed(0)}},watch:{animating:function(t){t&&(this.animationCompleted=!1,this.tweenedValue=0,this.tween(9))}},methods:{tween:function(t){var n=this;w.a.to(this.$data,.3,{tweenedValue:t,delay:0,onComplete:function(){n.animating?(n.tweenedValue=0,n.tween(9)):n.animationCompleted||(n.tween(n.number),n.animationCompleted=!0)}})}}},O=e("KHd+"),_=Object(O.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v(this._s(this.animatedValue))])}),[],!1,null,null,null).exports;function P(t,n,e,i,a,r,o){try{var c=t[r](o),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(i,a)}function k(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function j(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?k(Object(e),!0).forEach((function(n){W(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):k(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function W(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var N,R,V={name:"Dice",components:{PlayControls:x.a,AnimatedNumber:_},mixins:[u.a,m.a,f.a],data:function(){return{clickSound:p.a,formIsValid:!0,loading:!1,playing:!1,refNumber:null,payout:null,winChance:null,direction:-1,win:0,roll:0,mutating:!1}},computed:j({},Object(c.d)("auth",["account"]),{rollDigits:function(){return Object(h.h)(this.roll,0,4)},minRoll:function(){return 0},maxRoll:function(){return 9999},rollsRangeLength:function(){return this.maxRoll-this.minRoll+1},low:function(){return Object(h.i)(Math.max(this.minWinChance,this.refNumber))},high:function(){return 9999-this.low},minWinChance:function(){return Object(s.a)("dice.min_win_chance")},maxWinChance:function(){return Object(s.a)("dice.max_win_chance")},minRefNumber:function(){return 100*this.minWinChance},maxRefNumber:function(){return 100*this.maxWinChance},minPayout:function(){return parseFloat(Object(h.i)((100-this.houseEdge)/this.maxWinChance,4))},maxPayout:function(){return parseFloat(Object(h.i)((100-this.houseEdge)/this.minWinChance,4))},houseEdge:function(){return Object(s.a)("dice.house_edge")},sliderTrackColor:function(){return-1===this.direction?"grey":"primary"},sliderFillColor:function(){return-1===this.direction?"primary":"grey"}}),watch:{direction:function(t){var n=this;this.mutate((function(){n.winChance=n.calcWinChance(t,n.refNumber),n.payout=n.calcPayout(n.winChance)}))},refNumber:function(t){var n=this;this.mutate((function(){n.winChance=n.calcWinChance(n.direction,t),n.payout=n.calcPayout(n.winChance)}))},winChance:function(t){var n=this;this.mutate((function(){n.refNumber=n.calcRefNumber(n.direction,t),n.payout=n.calcPayout(t)}))},payout:function(t){var n=this;this.mutate((function(){n.winChance=n.calcWinChanceByPayout(t),n.refNumber=n.calcRefNumber(n.direction,n.winChance)}))}},created:function(){this.refNumber=5e3},methods:j({},Object(c.b)({updateUserAccountBalance:"auth/updateUserAccountBalance",setProvablyFairGame:"provably-fair/set"}),{play:(N=a.a.mark((function t(n){var e,i,r,c,s=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,this.playing=!0,this.win=0,this.updateUserAccountBalance(this.account.balance-n),t.next=6,Object(h.j)(500);case 6:return e=this.getRoute("play"),i={hash:this.provablyFairGame.hash,bet:n,direction:this.direction,win_chance:this.winChance},t.next=10,o.a.post(e,i);case 10:r=t.sent,c=r.data,this.loading=!1,this.roll=c.gameable.roll,this.setProvablyFairGame({key:this.gamePackageId,game:c.pf_game}),setTimeout((function(){s.win=c.win,s.playing=!1,s.updateUserAccountBalance(c.account.balance),c.win>0?s.sound(v.a):s.sound(g.a)}),500);case 17:case"end":return t.stop()}}),t,this)})),R=function(){var t=this,n=arguments;return new Promise((function(e,i){var a=N.apply(t,n);function r(t){P(a,e,i,r,o,"next",t)}function o(t){P(a,e,i,r,o,"throw",t)}r(void 0)}))},function(t){return R.apply(this,arguments)}),startMutation:function(){this.mutating=!0},stopMutation:function(){var t=this;this.$nextTick((function(){t.mutating=!1}))},mutate:function(t){this.mutating||(this.startMutation(),t(),this.stopMutation())},validateWinChance:function(t){return Object(h.g)(t)&&t>=this.minWinChance&&t<=this.maxWinChance||this.$t("min: {0}, max: {1}",[Object(l.decimal)(this.minWinChance),Object(l.decimal)(this.maxWinChance)])},validatePayout:function(t){return Object(h.g)(t)&&t>=this.minPayout&&t<=this.maxPayout||this.$t("min: {0}, max: {1}",[Object(l.decimal)(this.minPayout,4),Object(l.decimal)(this.maxPayout,4)])},calcRefNumber:function(t,n){return-1===t?100*n:100*(100-n)},calcWinChance:function(t,n){return-1===t?Object(h.i)((n-this.minRoll)/this.rollsRangeLength*100,2):Object(h.i)((this.maxRoll-n+1)/this.rollsRangeLength*100,2)},calcWinChanceByPayout:function(t){return Object(h.i)((100-this.houseEdge)/t,2)},calcPayout:function(t){return Object(h.i)((100-this.houseEdge)/t,4)},decrementWinChance:function(){this.winChance-1>=this.minWinChance?this.winChance-=1:this.winChance=this.minWinChance},incrementWinChance:function(){this.winChance+1<=this.maxWinChance?this.winChance+=1:this.winChance=this.maxWinChance},decrementRefNumber:function(){this.refNumber-100>=this.minRefNumber?this.refNumber-=100:this.refNumber=this.minRefNumber},incrementRefNumber:function(){this.refNumber+100<=this.maxRefNumber?this.refNumber+=100:this.refNumber=this.maxRefNumber},decrementPayout:function(){this.payout-1>=this.minPayout?this.payout=Object(h.i)(this.payout-1,4):this.payout=this.minPayout},incrementPayout:function(){this.payout+1<=this.maxPayout?this.payout=Object(h.i)(this.payout+1,4):this.payout=this.maxPayout}})},I=(e("WFAi"),e("ZUTo")),E=e.n(I),F=e("gzZi"),D=e("pgmH"),$=e("sK+t"),B=e("Yq0q"),S=e("S9TP"),A=e("Ey0z"),T=e("D9m0"),U=e("ug2X"),M=e("hlRy"),J=Object(O.a)(V,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"d-flex flex-column fill-height py-3"},[e("div",{staticClass:"d-flex justify-center fill-height align-center"},[e("v-row",{attrs:{justify:"center"}},[e("v-col",{staticClass:"text-center",attrs:{cols:"3",md:"2",lg:"1"}},[e("v-card",{attrs:{elevation:3,loading:t.playing}},[e("animated-number",{class:[{blur:t.win>0},"digit"],attrs:{number:parseInt(t.rollDigits[0],10),animating:t.playing}})],1)],1),t._v(" "),e("v-col",{staticClass:"text-center",attrs:{cols:"3",md:"2",lg:"1"}},[e("v-card",{attrs:{elevation:3,loading:t.playing}},[e("animated-number",{class:[{blur:t.win>0},"digit"],attrs:{number:parseInt(t.rollDigits[1],10),animating:t.playing}})],1)],1),t._v(" "),e("v-col",{staticClass:"text-center",attrs:{cols:"3",md:"2",lg:"1"}},[e("v-card",{attrs:{elevation:3,loading:t.playing}},[e("animated-number",{class:[{blur:t.win>0},"digit"],attrs:{number:parseInt(t.rollDigits[2],10),animating:t.playing}})],1)],1),t._v(" "),e("v-col",{staticClass:"text-center",attrs:{cols:"3",md:"2",lg:"1"}},[e("v-card",{attrs:{elevation:3,loading:t.playing}},[e("animated-number",{class:[{blur:t.win>0},"digit"],attrs:{number:parseInt(t.rollDigits[3],10),animating:t.playing}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"d-flex justify-center flex-column"},[e("v-slider",{staticClass:"px-5",attrs:{"thumb-label":"always",min:t.minRefNumber,max:t.maxRefNumber,step:1,"track-color":t.sliderTrackColor,"track-fill-color":t.sliderFillColor},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("v-icon",{on:{click:t.decrementRefNumber}},[t._v("\n          mdi-minus\n        ")])]},proxy:!0},{key:"append",fn:function(){return[e("v-icon",{on:{click:t.incrementRefNumber}},[t._v("\n          mdi-plus\n        ")])]},proxy:!0}]),model:{value:t.refNumber,callback:function(n){t.refNumber=n},expression:"refNumber"}}),t._v(" "),e("div",{staticClass:"align-self-center"},[e("v-form",{staticClass:"d-md-flex",model:{value:t.formIsValid,callback:function(n){t.formIsValid=n},expression:"formIsValid"}},[e("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[e("v-text-field",{staticClass:"text-center flex-grow-0 mr-0 mr-lg-2",attrs:{dense:"",outlined:"","full-width":!1,label:t.$t("Win chance"),disabled:t.playing,rules:[function(n){return t.validateWinChance(n)}]},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(n){t.winChance=t.minWinChance}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down")])],1),t._v(" "),e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:t.decrementWinChance}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-minus")])],1)]},proxy:!0},{key:"append",fn:function(){return[e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:t.incrementWinChance}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-plus")])],1),t._v(" "),e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(n){t.winChance=t.maxWinChance}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up")])],1)]},proxy:!0}]),model:{value:t.winChance,callback:function(n){t.winChance=t._n(n)},expression:"winChance"}})],1),t._v(" "),e("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[e("v-text-field",{staticClass:"text-center flex-grow-0 ml-0 ml-lg-2",attrs:{dense:"",outlined:"","full-width":!1,label:t.$t("Payout"),disabled:t.playing,rules:[function(n){return t.validatePayout(n)}]},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(n){t.payout=t.minPayout}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down")])],1),t._v(" "),e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:t.decrementPayout}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-minus")])],1)]},proxy:!0},{key:"append",fn:function(){return[e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:t.incrementPayout}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-plus")])],1),t._v(" "),e("v-btn",{attrs:{small:"",text:"",icon:"",color:"primary"},on:{click:function(n){t.payout=t.maxPayout}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up")])],1)]},proxy:!0}]),model:{value:t.payout,callback:function(n){t.payout=t._n(n)},expression:"payout"}})],1)],1)],1),t._v(" "),e("v-btn-toggle",{staticClass:"align-self-center mb-3",attrs:{"active-class":"primary--text",mandatory:"",rounded:"",group:""},model:{value:t.direction,callback:function(n){t.direction=n},expression:"direction"}},[e("v-btn",{staticClass:"mx-1",attrs:{disabled:t.playing,small:"",value:-1},on:{click:function(n){return t.sound(t.clickSound)}}},[t._v("\n        "+t._s(t.$t("Roll {0} - {1}",[t.minRoll,t.refNumber-1]))+"\n      ")]),t._v(" "),e("v-btn",{staticClass:"mx-1",attrs:{disabled:t.playing,small:"",value:1},on:{click:function(n){return t.sound(t.clickSound)}}},[t._v("\n        "+t._s(t.$t("Roll {0} - {1}",[t.refNumber,t.maxRoll]))+"\n      ")])],1)],1),t._v(" "),e("play-controls",{attrs:{loading:t.loading,playing:t.playing,disabled:!t.formIsValid},on:{play:t.play}})],1)}),[],!1,null,"42b698df",null);n.default=J.exports;E()(J,{VBtn:F.a,VBtnToggle:D.a,VCard:$.a,VCol:B.a,VForm:S.a,VIcon:A.a,VRow:T.a,VSlider:U.a,VTextField:M.a})},LswC:function(t,n,e){t.exports=e.p+"audio/dice/lose.wav"},OY7U:function(t,n,e){"use strict";var i=e("g6NE");var a={computed:{gamePackageId:function(){return this.$route.params.game},provablyFairGame:function(){return this.$store.getters["provably-fair/get"](this.gamePackageId)||{}}},methods:{getRoute:function(t){return n="games.".concat(this.gamePackageId,".").concat(t),i.a.getters["route/get"](n);var n}}},r=e("KHd+"),o=Object(r.a)(a,void 0,void 0,!1,null,null,null);n.a=o.exports},RMW0:function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,".digit[data-v-42b698df] {\n  font-family: monospace;\n  font-size: 5em;\n  line-height: 2em;\n}\n.blur[data-v-42b698df] {\n  color: #fff;\n  text-transform: uppercase;\n  animation: blur-data-v-42b698df 1s ease-out 2;\n  text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n}\n@keyframes blur-data-v-42b698df {\nfrom {\n    text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff;\n}\n}",""])},RhOJ:function(t,n,e){t.exports=e.p+"audio/dice/win.wav"},VA6O:function(t,n,e){t.exports=e.p+"audio/common/click.wav"},WFAi:function(t,n,e){"use strict";var i=e("WbzQ");e.n(i).a},WbzQ:function(t,n,e){var i=e("RMW0");"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(i,a);i.locals&&(t.exports=i.locals)}}]);
//# sourceMappingURL=dice-resources-js-game.js.map